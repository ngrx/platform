
    <html>
    <head>
      <script src="https://unpkg.com/@stackblitz/sdk/bundles/sdk.umd.js"></script>
    </head>
    <body>
    <script>
      const project = {
        files: {"angular.json":"{\r\n  \"$schema\":\r\n    \"./node_modules/@angular-devkit/core/src/workspace/workspace-schema.json\",\r\n  \"version\": 1,\r\n  \"newProjectRoot\": \"projects\",\r\n  \"defaultProject\": \"example-app\",\r\n  \"projects\": {\r\n    \"example-app\": {\r\n      \"root\": \"\",\r\n      \"sourceRoot\": \"projects/example-app/src\",\r\n      \"projectType\": \"application\",\r\n      \"prefix\": \"bc\",\r\n      \"schematics\": {},\r\n      \"architect\": {\r\n        \"build\": {\r\n          \"builder\": \"@angular-devkit/build-angular:browser\",\r\n          \"options\": {\r\n            \"outputPath\": \"projects/example-app/dist\",\r\n            \"index\": \"projects/example-app/src/index.html\",\r\n            \"main\": \"projects/example-app/src/main.ts\",\r\n            \"polyfills\": \"projects/example-app/src/polyfills.ts\",\r\n            \"tsConfig\": \"projects/example-app/tsconfig.app.json\",\r\n            \"assets\": [\r\n              \"projects/example-app/src/favicon.ico\",\r\n              \"projects/example-app/src/assets\"\r\n            ],\r\n            \"styles\": [\"projects/example-app/src/styles.css\"],\r\n            \"scripts\": []\r\n          },\r\n          \"configurations\": {\r\n            \"production\": {\r\n              \"fileReplacements\": [\r\n                {\r\n                  \"replace\":\r\n                    \"projects/example-app/src/environments/environment.ts\",\r\n                  \"with\":\r\n                    \"projects/example-app/src/environments/environment.prod.ts\"\r\n                }\r\n              ],\r\n              \"optimization\": true,\r\n              \"outputHashing\": \"all\",\r\n              \"sourceMap\": false,\r\n              \"extractCss\": true,\r\n              \"namedChunks\": false,\r\n              \"aot\": true,\r\n              \"extractLicenses\": true,\r\n              \"vendorChunk\": false,\r\n              \"buildOptimizer\": true\r\n            }\r\n          }\r\n        },\r\n        \"serve\": {\r\n          \"builder\": \"@angular-devkit/build-angular:dev-server\",\r\n          \"options\": {\r\n            \"browserTarget\": \"example-app:build\"\r\n          },\r\n          \"configurations\": {\r\n            \"production\": {\r\n              \"browserTarget\": \"example-app:build:production\"\r\n            }\r\n          }\r\n        },\r\n        \"extract-i18n\": {\r\n          \"builder\": \"@angular-devkit/build-angular:extract-i18n\",\r\n          \"options\": {\r\n            \"browserTarget\": \"example-app:build\"\r\n          }\r\n        },\r\n        \"test\": {\r\n          \"builder\": \"@angular-devkit/build-angular:karma\",\r\n          \"options\": {\r\n            \"main\": \"projects/example-app/src/test.ts\",\r\n            \"polyfills\": \"projects/example-app/src/polyfills.ts\",\r\n            \"tsConfig\": \"projects/example-app/tsconfig.spec.json\",\r\n            \"karmaConfig\": \"projects/example-app/karma.conf.js\",\r\n            \"styles\": [\"projects/example-app/src/styles.css\"],\r\n            \"scripts\": [],\r\n            \"assets\": [\r\n              \"projects/example-app/src/favicon.ico\",\r\n              \"projects/example-app/src/assets\"\r\n            ]\r\n          }\r\n        },\r\n        \"lint\": {\r\n          \"builder\": \"@angular-devkit/build-angular:tslint\",\r\n          \"options\": {\r\n            \"tsConfig\": [\r\n              \"projects/example-app/tsconfig.app.json\",\r\n              \"projects/example-app/tsconfig.spec.json\"\r\n            ],\r\n            \"exclude\": [\"**/node_modules/**\"]\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"schematics\": {\r\n    \"@schematics/angular:component\": {\r\n      \"inlineStyle\": true,\r\n      \"inlineTemplate\": true,\r\n      \"flat\": true,\r\n      \"spec\": false,\r\n      \"prefix\": \"bc\",\r\n      \"styleext\": \"css\"\r\n    },\r\n    \"@schematics/angular:directive\": {\r\n      \"prefix\": \"bc\"\r\n    }\r\n  }\r\n}\r\n","projects/example-app/src/app/app-routing.module.ts":"import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { NotFoundPageComponent } from './core/containers/not-found-page.component';\r\nimport { AuthGuard } from './auth/services/auth-guard.service';\r\n\r\nexport const routes: Routes = [\r\n  { path: '', redirectTo: '/books', pathMatch: 'full' },\r\n  {\r\n    path: 'books',\r\n    loadChildren: './books/books.module#BooksModule',\r\n    canActivate: [AuthGuard],\r\n  },\r\n  { path: '**', component: NotFoundPageComponent },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes, { useHash: true })],\r\n  exports: [RouterModule],\r\n})\r\nexport class AppRoutingModule {}\r\n","projects/example-app/src/app/app.module.ts":"import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\n\r\nimport { StoreModule } from '@ngrx/store';\r\nimport { EffectsModule } from '@ngrx/effects';\r\nimport { DBModule } from '@ngrx/db';\r\nimport { StoreRouterConnectingModule } from '@ngrx/router-store';\r\nimport { StoreDevtoolsModule } from '@ngrx/store-devtools';\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AuthModule } from './auth/auth.module';\r\nimport { metaReducers, reducers } from './reducers';\r\nimport { schema } from './db';\r\nimport { AppComponent } from './core/containers/app.component';\r\nimport { CoreModule } from './core/core.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    BrowserModule,\r\n    BrowserAnimationsModule,\r\n    HttpClientModule,\r\n    AuthModule,\r\n    AppRoutingModule,\r\n\r\n    /**\r\n     * StoreModule.forRoot is imported once in the root module, accepting a reducer\r\n     * function or object map of reducer functions. If passed an object of\r\n     * reducers, combineReducers will be run creating your application\r\n     * meta-reducer. This returns all providers for an @ngrx/store\r\n     * based application.\r\n     */\r\n    StoreModule.forRoot(reducers, { metaReducers }),\r\n\r\n    /**\r\n     * @ngrx/router-store keeps router state up-to-date in the store.\r\n     */\r\n    StoreRouterConnectingModule.forRoot(),\r\n\r\n    /**\r\n     * Store devtools instrument the store retaining past versions of state\r\n     * and recalculating new states. This enables powerful time-travel\r\n     * debugging.\r\n     *\r\n     * To use the debugger, install the Redux Devtools extension for either\r\n     * Chrome or Firefox\r\n     *\r\n     * See: https://github.com/zalmoxisus/redux-devtools-extension\r\n     */\r\n    StoreDevtoolsModule.instrument({\r\n      name: 'NgRx Book Store App',\r\n    }),\r\n\r\n    /**\r\n     * EffectsModule.forRoot() is imported once in the root module and\r\n     * sets up the effects class to be initialized immediately when the\r\n     * application starts.\r\n     *\r\n     * See: https://ngrx.io/guide/effects#registering-root-effects\r\n     */\r\n    EffectsModule.forRoot([]),\r\n\r\n    /**\r\n     * `provideDB` sets up @ngrx/db with the provided schema and makes the Database\r\n     * service available.\r\n     */\r\n    DBModule.provideDB(schema),\r\n\r\n    CoreModule,\r\n  ],\r\n  bootstrap: [AppComponent],\r\n})\r\nexport class AppModule {}\r\n","projects/example-app/src/app/auth/actions/auth-api.actions.ts":"import { props, createAction } from '@ngrx/store';\r\nimport { User } from '../models/user';\r\n\r\nexport const loginSuccess = createAction(\r\n  '[Auth/API] Login Success',\r\n  props<{ user: User }>()\r\n);\r\n\r\nexport const loginFailure = createAction(\r\n  '[Auth/API] Login Failure',\r\n  props<{ error: any }>()\r\n);\r\n\r\nexport const loginRedirect = createAction('[Auth/API] Login Redirect');\r\n\r\n// This is an alternative to union() type export. Work great when you need\r\n// to export only a single Action type.\r\nexport type AuthApiActionsUnion = ReturnType<\r\n  typeof loginSuccess | typeof loginFailure | typeof loginRedirect\r\n>;\r\n","projects/example-app/src/app/auth/actions/auth.actions.ts":"import { createAction, union } from '@ngrx/store';\r\n\r\nexport const logout = createAction('[Auth] Logout');\r\nexport const logoutConfirmation = createAction('[Auth] Logout Confirmation');\r\nexport const logoutConfirmationDismiss = createAction(\r\n  '[Auth] Logout Confirmation Dismiss'\r\n);\r\n\r\nconst all = union({ logout, logoutConfirmation, logoutConfirmationDismiss });\r\nexport type AuthActionsUnion = typeof all;\r\n","projects/example-app/src/app/auth/actions/index.ts":"import * as AuthActions from './auth.actions';\r\nimport * as AuthApiActions from './auth-api.actions';\r\nimport * as LoginPageActions from './login-page.actions';\r\n\r\nexport { AuthActions, AuthApiActions, LoginPageActions };\r\n","projects/example-app/src/app/auth/actions/login-page.actions.ts":"import { createAction, props, union } from '@ngrx/store';\r\nimport { Credentials } from '../models/user';\r\n\r\nexport const login = createAction(\r\n  '[Login Page] Login',\r\n  props<{ credentials: Credentials }>()\r\n);\r\n\r\nexport type LoginPageActionsUnion = ReturnType<typeof login>;\r\n","projects/example-app/src/app/auth/auth-routing.module.ts":"import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { LoginPageComponent } from './containers/login-page.component';\r\n\r\nconst routes: Routes = [{ path: 'login', component: LoginPageComponent }];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class AuthRoutingModule {}\r\n","projects/example-app/src/app/auth/auth.module.ts":"import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { StoreModule } from '@ngrx/store';\r\nimport { EffectsModule } from '@ngrx/effects';\r\nimport { LogoutConfirmationDialogComponent } from './components/logout-confirmation-dialog.component';\r\nimport { LoginPageComponent } from './containers/login-page.component';\r\nimport { LoginFormComponent } from './components/login-form.component';\r\nimport { AuthRoutingModule } from './auth-routing.module';\r\nimport { AuthEffects } from './effects/auth.effects';\r\nimport { reducers } from './reducers';\r\nimport { MaterialModule } from '../material';\r\n\r\nexport const COMPONENTS = [\r\n  LoginPageComponent,\r\n  LoginFormComponent,\r\n  LogoutConfirmationDialogComponent,\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    ReactiveFormsModule,\r\n    MaterialModule,\r\n    AuthRoutingModule,\r\n    StoreModule.forFeature('auth', reducers),\r\n    EffectsModule.forFeature([AuthEffects]),\r\n  ],\r\n  declarations: COMPONENTS,\r\n  entryComponents: [LogoutConfirmationDialogComponent],\r\n})\r\nexport class AuthModule {}\r\n","projects/example-app/src/app/auth/components/login-form.component.ts":"import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { FormGroup, FormControl } from '@angular/forms';\r\nimport { Credentials } from '../models/user';\r\n\r\n@Component({\r\n  selector: 'bc-login-form',\r\n  template: `\r\n    <mat-card>\r\n      <mat-card-title>Login</mat-card-title>\r\n      <mat-card-content>\r\n        <form [formGroup]=\"form\" (ngSubmit)=\"submit()\">\r\n          <p>\r\n            <mat-form-field>\r\n              <input type=\"text\" matInput placeholder=\"Username\" formControlName=\"username\">\r\n            </mat-form-field>\r\n          </p>\r\n\r\n          <p>\r\n            <mat-form-field>\r\n              <input type=\"password\" matInput placeholder=\"Password\" formControlName=\"password\">\r\n            </mat-form-field>\r\n          </p>\r\n\r\n          <p *ngIf=\"errorMessage\" class=\"loginError\">\r\n            {{ errorMessage }}\r\n          </p>\r\n\r\n          <p class=\"loginButtons\">\r\n            <button type=\"submit\" mat-button>Login</button>\r\n          </p>\r\n\r\n        </form>\r\n      </mat-card-content>\r\n    </mat-card>\r\n  `,\r\n  styles: [\r\n    `\r\n      :host {\r\n        display: flex;\r\n        justify-content: center;\r\n        margin: 72px 0;\r\n      }\r\n\r\n      .mat-form-field {\r\n        width: 100%;\r\n        min-width: 300px;\r\n      }\r\n\r\n      mat-card-title,\r\n      mat-card-content {\r\n        display: flex;\r\n        justify-content: center;\r\n      }\r\n\r\n      .loginError {\r\n        padding: 16px;\r\n        width: 300px;\r\n        color: white;\r\n        background-color: red;\r\n      }\r\n\r\n      .loginButtons {\r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: flex-end;\r\n      }\r\n    `,\r\n  ],\r\n})\r\nexport class LoginFormComponent implements OnInit {\r\n  @Input()\r\n  set pending(isPending: boolean) {\r\n    if (isPending) {\r\n      this.form.disable();\r\n    } else {\r\n      this.form.enable();\r\n    }\r\n  }\r\n\r\n  @Input() errorMessage: string | null;\r\n\r\n  @Output() submitted = new EventEmitter<Credentials>();\r\n\r\n  form: FormGroup = new FormGroup({\r\n    username: new FormControl('ngrx'),\r\n    password: new FormControl(''),\r\n  });\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit() {}\r\n\r\n  submit() {\r\n    if (this.form.valid) {\r\n      this.submitted.emit(this.form.value);\r\n    }\r\n  }\r\n}\r\n","projects/example-app/src/app/auth/components/logout-confirmation-dialog.component.ts":"import { Component } from '@angular/core';\r\n\r\n/**\r\n * The dialog will close with true if user clicks the ok button,\r\n * otherwise it will close with undefined.\r\n */\r\n@Component({\r\n  template: `\r\n    <h2 mat-dialog-title>Logout</h2>\r\n    <mat-dialog-content>Are you sure you want to logout?</mat-dialog-content>\r\n    <mat-dialog-actions>\r\n      <button mat-button [mat-dialog-close]=\"false\">Cancel</button>\r\n      <button mat-button [mat-dialog-close]=\"true\">OK</button>\r\n    </mat-dialog-actions>\r\n  `,\r\n  styles: [\r\n    `\r\n      :host {\r\n        display: block;\r\n        width: 100%;\r\n        max-width: 300px;\r\n      }\r\n\r\n      mat-dialog-actions {\r\n        display: flex;\r\n        justify-content: flex-end;\r\n      }\r\n\r\n      [mat-button] {\r\n        padding: 0;\r\n      }\r\n    `,\r\n  ],\r\n})\r\nexport class LogoutConfirmationDialogComponent {}\r\n","projects/example-app/src/app/auth/containers/login-page.component.ts":"import { Component, OnInit } from '@angular/core';\r\nimport { Store, select } from '@ngrx/store';\r\nimport * as fromAuth from '../../auth/reducers';\r\nimport { LoginPageActions } from '../actions';\r\nimport { Credentials } from '../models/user';\r\n\r\n@Component({\r\n  selector: 'bc-login-page',\r\n  template: `\r\n    <bc-login-form\r\n      (submitted)=\"onSubmit($event)\"\r\n      [pending]=\"pending$ | async\"\r\n      [errorMessage]=\"error$ | async\">\r\n    </bc-login-form>\r\n  `,\r\n  styles: [],\r\n})\r\nexport class LoginPageComponent implements OnInit {\r\n  pending$ = this.store.pipe(select(fromAuth.getLoginPagePending));\r\n  error$ = this.store.pipe(select(fromAuth.getLoginPageError));\r\n\r\n  constructor(private store: Store<fromAuth.State>) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  onSubmit(credentials: Credentials) {\r\n    this.store.dispatch(LoginPageActions.login({ credentials }));\r\n  }\r\n}\r\n","projects/example-app/src/app/auth/effects/auth.effects.ts":"import { Injectable } from '@angular/core';\r\nimport { MatDialog } from '@angular/material';\r\nimport { Router } from '@angular/router';\r\nimport { Actions, Effect, ofType } from '@ngrx/effects';\r\nimport { of } from 'rxjs';\r\nimport { catchError, exhaustMap, map, tap } from 'rxjs/operators';\r\nimport { LoginPageActions, AuthApiActions, AuthActions } from '../actions';\r\nimport { Credentials } from '../models/user';\r\nimport { LogoutConfirmationDialogComponent } from '../components/logout-confirmation-dialog.component';\r\nimport { AuthService } from '../services/auth.service';\r\n\r\n@Injectable()\r\nexport class AuthEffects {\r\n  @Effect()\r\n  login$ = this.actions$.pipe(\r\n    ofType(LoginPageActions.login.type),\r\n    map(action => action.credentials),\r\n    exhaustMap((auth: Credentials) =>\r\n      this.authService.login(auth).pipe(\r\n        map(user => AuthApiActions.loginSuccess({ user })),\r\n        catchError(error => of(AuthApiActions.loginFailure({ error })))\r\n      )\r\n    )\r\n  );\r\n\r\n  @Effect({ dispatch: false })\r\n  loginSuccess$ = this.actions$.pipe(\r\n    ofType(AuthApiActions.loginSuccess.type),\r\n    tap(() => this.router.navigate(['/']))\r\n  );\r\n\r\n  @Effect({ dispatch: false })\r\n  loginRedirect$ = this.actions$.pipe(\r\n    ofType(AuthApiActions.loginRedirect.type, AuthActions.logout.type),\r\n    tap(authed => {\r\n      this.router.navigate(['/login']);\r\n    })\r\n  );\r\n\r\n  @Effect()\r\n  logoutConfirmation$ = this.actions$.pipe(\r\n    ofType(AuthActions.logoutConfirmation.type),\r\n    exhaustMap(() => {\r\n      const dialogRef = this.dialog.open<\r\n        LogoutConfirmationDialogComponent,\r\n        undefined,\r\n        boolean\r\n      >(LogoutConfirmationDialogComponent);\r\n\r\n      return dialogRef.afterClosed();\r\n    }),\r\n    map(\r\n      result =>\r\n        result ? AuthActions.logout() : AuthActions.logoutConfirmationDismiss()\r\n    )\r\n  );\r\n\r\n  constructor(\r\n    private actions$: Actions<LoginPageActions.LoginPageActionsUnion>,\r\n    private authService: AuthService,\r\n    private router: Router,\r\n    private dialog: MatDialog\r\n  ) {}\r\n}\r\n","projects/example-app/src/app/auth/models/user.ts":"export interface Credentials {\r\n  username: string;\r\n  password: string;\r\n}\r\n\r\nexport interface User {\r\n  name: string;\r\n}\r\n","projects/example-app/src/app/auth/reducers/auth.reducer.ts":"import { AuthActions, AuthApiActions } from '../actions';\r\nimport { User } from '../models/user';\r\n\r\nexport interface State {\r\n  user: User | null;\r\n}\r\n\r\nexport const initialState: State = {\r\n  user: null,\r\n};\r\n\r\nexport function reducer(\r\n  state = initialState,\r\n  action: AuthApiActions.AuthApiActionsUnion | AuthActions.AuthActionsUnion\r\n): State {\r\n  switch (action.type) {\r\n    case AuthApiActions.loginSuccess.type: {\r\n      return {\r\n        ...state,\r\n        user: action.user,\r\n      };\r\n    }\r\n\r\n    case AuthActions.logout.type: {\r\n      return initialState;\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n\r\nexport const getUser = (state: State) => state.user;\r\n","projects/example-app/src/app/auth/reducers/index.ts":"import {\r\n  createSelector,\r\n  createFeatureSelector,\r\n  ActionReducerMap,\r\n} from '@ngrx/store';\r\nimport * as fromRoot from '../../reducers';\r\nimport * as fromAuth from './auth.reducer';\r\nimport * as fromLoginPage from './login-page.reducer';\r\nimport { AuthApiActions } from '../actions';\r\n\r\nexport interface AuthState {\r\n  status: fromAuth.State;\r\n  loginPage: fromLoginPage.State;\r\n}\r\n\r\nexport interface State extends fromRoot.State {\r\n  auth: AuthState;\r\n}\r\n\r\nexport const reducers: ActionReducerMap<\r\n  AuthState,\r\n  AuthApiActions.AuthApiActionsUnion\r\n> = {\r\n  status: fromAuth.reducer,\r\n  loginPage: fromLoginPage.reducer,\r\n};\r\n\r\nexport const selectAuthState = createFeatureSelector<State, AuthState>('auth');\r\n\r\nexport const selectAuthStatusState = createSelector(\r\n  selectAuthState,\r\n  (state: AuthState) => state.status\r\n);\r\nexport const getUser = createSelector(selectAuthStatusState, fromAuth.getUser);\r\nexport const getLoggedIn = createSelector(getUser, user => !!user);\r\n\r\nexport const selectLoginPageState = createSelector(\r\n  selectAuthState,\r\n  (state: AuthState) => state.loginPage\r\n);\r\nexport const getLoginPageError = createSelector(\r\n  selectLoginPageState,\r\n  fromLoginPage.getError\r\n);\r\nexport const getLoginPagePending = createSelector(\r\n  selectLoginPageState,\r\n  fromLoginPage.getPending\r\n);\r\n","projects/example-app/src/app/auth/reducers/login-page.reducer.ts":"import { LoginPageActions, AuthApiActions } from '../actions';\r\n\r\nexport interface State {\r\n  error: string | null;\r\n  pending: boolean;\r\n}\r\n\r\nexport const initialState: State = {\r\n  error: null,\r\n  pending: false,\r\n};\r\n\r\nexport function reducer(\r\n  state = initialState,\r\n  action:\r\n    | AuthApiActions.AuthApiActionsUnion\r\n    | LoginPageActions.LoginPageActionsUnion\r\n): State {\r\n  switch (action.type) {\r\n    case LoginPageActions.login.type: {\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        pending: true,\r\n      };\r\n    }\r\n\r\n    case AuthApiActions.loginSuccess.type: {\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        pending: false,\r\n      };\r\n    }\r\n\r\n    case AuthApiActions.loginFailure.type: {\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n        pending: false,\r\n      };\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n\r\nexport const getError = (state: State) => state.error;\r\nexport const getPending = (state: State) => state.pending;\r\n","projects/example-app/src/app/auth/services/auth-guard.service.ts":"import { Injectable } from '@angular/core';\r\nimport { CanActivate } from '@angular/router';\r\nimport { Store, select } from '@ngrx/store';\r\nimport { Observable } from 'rxjs';\r\nimport { map, take } from 'rxjs/operators';\r\nimport { AuthApiActions } from '../../auth/actions';\r\nimport * as fromAuth from '../../auth/reducers';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AuthGuard implements CanActivate {\r\n  constructor(private store: Store<fromAuth.State>) {}\r\n\r\n  canActivate(): Observable<boolean> {\r\n    return this.store.pipe(\r\n      select(fromAuth.getLoggedIn),\r\n      map(authed => {\r\n        if (!authed) {\r\n          this.store.dispatch(AuthApiActions.loginRedirect());\r\n          return false;\r\n        }\r\n\r\n        return true;\r\n      }),\r\n      take(1)\r\n    );\r\n  }\r\n}\r\n","projects/example-app/src/app/auth/services/auth.service.ts":"import { Injectable } from '@angular/core';\r\nimport { Observable, of, throwError } from 'rxjs';\r\nimport { User, Credentials } from '../models/user';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AuthService {\r\n  constructor() {}\r\n\r\n  login({ username, password }: Credentials): Observable<User> {\r\n    /**\r\n     * Simulate a failed login to display the error\r\n     * message for the login form.\r\n     */\r\n    if (username !== 'test' && username !== 'ngrx') {\r\n      return throwError('Invalid username or password');\r\n    }\r\n\r\n    return of({ name: 'User' });\r\n  }\r\n\r\n  logout() {\r\n    return of(true);\r\n  }\r\n}\r\n","projects/example-app/src/app/books/actions/book.actions.ts":"import { createAction, props } from '@ngrx/store';\r\nimport { Book } from '../models/book';\r\n\r\nexport const loadBook = createAction(\r\n  '[Book Exists Guard] Load Book',\r\n  props<{ book: Book }>()\r\n);\r\n\r\nexport type BookActionsUnion = ReturnType<typeof loadBook>;\r\n","projects/example-app/src/app/books/actions/books-api.actions.ts":"import { createAction, union, props } from '@ngrx/store';\r\nimport { Book } from '../models/book';\r\n\r\nexport const searchSuccess = createAction(\r\n  '[Books/API] Search Success',\r\n  props<{ books: Book[] }>()\r\n);\r\n\r\nexport const searchFailure = createAction(\r\n  '[Books/API] Search Failure',\r\n  props<{ errorMsg: string }>()\r\n);\r\n\r\n/**\r\n * Export a type alias of all actions in this action group\r\n * so that reducers can easily compose action types\r\n */\r\nconst all = union({ searchSuccess, searchFailure });\r\nexport type BooksApiActionsUnion = typeof all;\r\n","projects/example-app/src/app/books/actions/collection-api.actions.ts":"import { createAction, props, union } from '@ngrx/store';\r\nimport { Book } from '../models/book';\r\n\r\n/**\r\n * Add Book to Collection Actions\r\n */\r\nexport const addBookSuccess = createAction(\r\n  '[Collection/API] Add Book Success',\r\n  props<{ book: Book }>()\r\n);\r\n\r\nexport const addBookFailure = createAction(\r\n  '[Collection/API] Add Book Failure',\r\n  props<{ book: Book }>()\r\n);\r\n\r\n/**\r\n * Remove Book from Collection Actions\r\n */\r\nexport const removeBookSuccess = createAction(\r\n  '[Collection/API] Remove Book Success',\r\n  props<{ book: Book }>()\r\n);\r\n\r\nexport const removeBookFailure = createAction(\r\n  '[Collection/API] Remove Book Failure',\r\n  props<{ book: Book }>()\r\n);\r\n\r\n/**\r\n * Load Collection Actions\r\n */\r\nexport const loadBooksSuccess = createAction(\r\n  '[Collection/API] Load Books Success',\r\n  props<{ books: Book[] }>()\r\n);\r\n\r\nexport const loadBooksFailure = createAction(\r\n  '[Collection/API] Load Books Failure',\r\n  props<{ error: any }>()\r\n);\r\n\r\nconst all = union({\r\n  addBookSuccess,\r\n  addBookFailure,\r\n  removeBookSuccess,\r\n  removeBookFailure,\r\n  loadBooksSuccess,\r\n  loadBooksFailure,\r\n});\r\nexport type CollectionApiActionsUnion = typeof all;\r\n","projects/example-app/src/app/books/actions/collection-page.actions.ts":"import { createAction } from '@ngrx/store';\r\n\r\n/**\r\n * Load Collection Action\r\n */\r\nexport const loadCollection = createAction('[Collection Page] Load Collection');\r\n\r\nexport type CollectionPageActionsUnion = ReturnType<typeof loadCollection>;\r\n","projects/example-app/src/app/books/actions/find-book-page.actions.ts":"import { createAction, props } from '@ngrx/store';\r\n\r\nexport const searchBooks = createAction(\r\n  '[Find Book Page] Search Books',\r\n  props<{ query: string }>()\r\n);\r\n\r\nexport type FindBookPageActionsUnion = ReturnType<typeof searchBooks>;\r\n","projects/example-app/src/app/books/actions/index.ts":"import * as BookActions from './book.actions';\r\nimport * as BooksApiActions from './books-api.actions';\r\nimport * as CollectionApiActions from './collection-api.actions';\r\nimport * as CollectionPageActions from './collection-page.actions';\r\nimport * as FindBookPageActions from './find-book-page.actions';\r\nimport * as SelectedBookPageActions from './selected-book-page.actions';\r\nimport * as ViewBookPageActions from './view-book-page.actions';\r\n\r\nexport {\r\n  BookActions,\r\n  BooksApiActions,\r\n  CollectionApiActions,\r\n  CollectionPageActions,\r\n  FindBookPageActions,\r\n  SelectedBookPageActions,\r\n  ViewBookPageActions,\r\n};\r\n","projects/example-app/src/app/books/actions/selected-book-page.actions.ts":"import { createAction, union, props } from '@ngrx/store';\r\nimport { Book } from '../models/book';\r\n\r\n/**\r\n * Add Book to Collection Action\r\n */\r\nexport const addBook = createAction(\r\n  '[Selected Book Page] Add Book',\r\n  props<{ book: Book }>()\r\n);\r\n\r\n/**\r\n * Remove Book from Collection Action\r\n */\r\nexport const removeBook = createAction(\r\n  '[Selected Book Page] Remove Book',\r\n  props<{ book: Book }>()\r\n);\r\n\r\nconst all = union({ addBook, removeBook });\r\n\r\nexport type SelectedBookPageActionsUnion = typeof all;\r\n","projects/example-app/src/app/books/actions/view-book-page.actions.ts":"import { createAction, props } from '@ngrx/store';\r\n\r\nexport const selectBook = createAction(\r\n  '[View Book Page] Select Book',\r\n  props<{ id: string }>()\r\n);\r\n\r\nexport type ViewBookPageActionsUnion = ReturnType<typeof selectBook>;\r\n","projects/example-app/src/app/books/books-routing.module.ts":"import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { FindBookPageComponent } from './containers/find-book-page.component';\r\nimport { ViewBookPageComponent } from './containers/view-book-page.component';\r\nimport { BookExistsGuard } from './guards/book-exists.guard';\r\nimport { CollectionPageComponent } from './containers/collection-page.component';\r\n\r\nexport const routes: Routes = [\r\n  { path: 'find', component: FindBookPageComponent },\r\n  {\r\n    path: ':id',\r\n    component: ViewBookPageComponent,\r\n    canActivate: [BookExistsGuard],\r\n  },\r\n  { path: '', component: CollectionPageComponent },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class BooksRoutingModule {}\r\n","projects/example-app/src/app/books/books.module.ts":"import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { StoreModule } from '@ngrx/store';\r\nimport { EffectsModule } from '@ngrx/effects';\r\n\r\nimport { reducers } from '../books/reducers';\r\nimport { MaterialModule } from '../material';\r\nimport { ComponentsModule } from './components';\r\nimport { BooksRoutingModule } from './books-routing.module';\r\nimport { BookEffects } from './effects/book.effects';\r\nimport { CollectionEffects } from './effects/collection.effects';\r\nimport { FindBookPageComponent } from './containers/find-book-page.component';\r\nimport { ViewBookPageComponent } from './containers/view-book-page.component';\r\nimport { SelectedBookPageComponent } from './containers/selected-book-page.component';\r\nimport { CollectionPageComponent } from './containers/collection-page.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    MaterialModule,\r\n    ComponentsModule,\r\n    BooksRoutingModule,\r\n\r\n    /**\r\n     * StoreModule.forFeature is used for composing state\r\n     * from feature modules. These modules can be loaded\r\n     * eagerly or lazily and will be dynamically added to\r\n     * the existing state.\r\n     */\r\n    StoreModule.forFeature('books', reducers),\r\n\r\n    /**\r\n     * Effects.forFeature is used to register effects\r\n     * from feature modules. Effects can be loaded\r\n     * eagerly or lazily and will be started immediately.\r\n     *\r\n     * All Effects will only be instantiated once regardless of\r\n     * whether they are registered once or multiple times.\r\n     */\r\n    EffectsModule.forFeature([BookEffects, CollectionEffects]),\r\n  ],\r\n  declarations: [\r\n    FindBookPageComponent,\r\n    ViewBookPageComponent,\r\n    SelectedBookPageComponent,\r\n    CollectionPageComponent,\r\n  ],\r\n})\r\nexport class BooksModule {}\r\n","projects/example-app/src/app/books/components/book-authors.component.ts":"import { Component, Input } from '@angular/core';\r\nimport { Book } from '../models/book';\r\n\r\n@Component({\r\n  selector: 'bc-book-authors',\r\n  template: `\r\n    <h5 mat-subheader>Written By:</h5>\r\n    <span>\r\n      {{ authors | bcAddCommas }}\r\n    </span>\r\n  `,\r\n  styles: [\r\n    `\r\n      h5 {\r\n        margin-bottom: 5px;\r\n      }\r\n    `,\r\n  ],\r\n})\r\nexport class BookAuthorsComponent {\r\n  @Input() book: Book;\r\n\r\n  get authors() {\r\n    return this.book.volumeInfo.authors;\r\n  }\r\n}\r\n","projects/example-app/src/app/books/components/book-detail.component.ts":"import { Component, Input, Output, EventEmitter } from '@angular/core';\r\nimport { Book } from '../models/book';\r\n\r\n@Component({\r\n  selector: 'bc-book-detail',\r\n  template: `\r\n    <mat-card *ngIf=\"book\">\r\n      <mat-card-title-group>\r\n        <mat-card-title>{{ title }}</mat-card-title>\r\n        <mat-card-subtitle *ngIf=\"subtitle\">{{ subtitle }}</mat-card-subtitle>\r\n        <img mat-card-sm-image *ngIf=\"thumbnail\" [src]=\"thumbnail\"/>\r\n      </mat-card-title-group>\r\n      <mat-card-content>\r\n        <p [innerHtml]=\"description\"></p>\r\n      </mat-card-content>\r\n      <mat-card-footer class=\"footer\">\r\n        <bc-book-authors [book]=\"book\"></bc-book-authors>\r\n      </mat-card-footer>\r\n      <mat-card-actions align=\"start\">\r\n        <button mat-raised-button color=\"warn\" *ngIf=\"inCollection\" (click)=\"remove.emit(book)\">\r\n        Remove Book from Collection\r\n        </button>\r\n\r\n        <button mat-raised-button color=\"primary\" *ngIf=\"!inCollection\" (click)=\"add.emit(book)\">\r\n        Add Book to Collection\r\n        </button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n\r\n  `,\r\n  styles: [\r\n    `\r\n      :host {\r\n        display: flex;\r\n        justify-content: center;\r\n        margin: 75px 0;\r\n      }\r\n      mat-card {\r\n        max-width: 600px;\r\n      }\r\n      mat-card-title-group {\r\n        margin-left: 0;\r\n      }\r\n      img {\r\n        width: 60px;\r\n        min-width: 60px;\r\n        margin-left: 5px;\r\n      }\r\n      mat-card-content {\r\n        margin: 15px 0 50px;\r\n      }\r\n      mat-card-actions {\r\n        margin: 25px 0 0 !important;\r\n      }\r\n      mat-card-footer {\r\n        padding: 0 25px 25px;\r\n        position: relative;\r\n      }\r\n    `,\r\n  ],\r\n})\r\nexport class BookDetailComponent {\r\n  /**\r\n   * Presentational components receive data through @Input() and communicate events\r\n   * through @Output() but generally maintain no internal state of their\r\n   * own. All decisions are delegated to 'container', or 'smart'\r\n   * components before data updates flow back down.\r\n   *\r\n   * More on 'smart' and 'presentational' components: https://gist.github.com/btroncone/a6e4347326749f938510#utilizing-container-components\r\n   */\r\n  @Input() book: Book;\r\n  @Input() inCollection: boolean;\r\n  @Output() add = new EventEmitter<Book>();\r\n  @Output() remove = new EventEmitter<Book>();\r\n\r\n  /**\r\n   * Tip: Utilize getters to keep templates clean\r\n   */\r\n  get id() {\r\n    return this.book.id;\r\n  }\r\n\r\n  get title() {\r\n    return this.book.volumeInfo.title;\r\n  }\r\n\r\n  get subtitle() {\r\n    return this.book.volumeInfo.subtitle;\r\n  }\r\n\r\n  get description() {\r\n    return this.book.volumeInfo.description;\r\n  }\r\n\r\n  get thumbnail() {\r\n    return (\r\n      this.book.volumeInfo.imageLinks &&\r\n      this.book.volumeInfo.imageLinks.smallThumbnail &&\r\n      this.book.volumeInfo.imageLinks.smallThumbnail.replace('http:', '')\r\n    );\r\n  }\r\n}\r\n","projects/example-app/src/app/books/components/book-preview-list.component.ts":"import { Component, Input } from '@angular/core';\r\nimport { Book } from '../models/book';\r\n\r\n@Component({\r\n  selector: 'bc-book-preview-list',\r\n  template: `\r\n    <bc-book-preview *ngFor=\"let book of books\" [book]=\"book\"></bc-book-preview>\r\n  `,\r\n  styles: [\r\n    `\r\n      :host {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        justify-content: center;\r\n      }\r\n    `,\r\n  ],\r\n})\r\nexport class BookPreviewListComponent {\r\n  @Input() books: Book[];\r\n}\r\n","projects/example-app/src/app/books/components/book-preview.component.ts":"import { Component, Input } from '@angular/core';\r\nimport { Book } from '../models/book';\r\n\r\n@Component({\r\n  selector: 'bc-book-preview',\r\n  template: `\r\n    <a [routerLink]=\"['/books', id]\">\r\n      <mat-card>\r\n        <mat-card-title-group>\r\n          <img mat-card-sm-image *ngIf=\"thumbnail\" [src]=\"thumbnail\"/>\r\n          <mat-card-title>{{ title | bcEllipsis:35 }}</mat-card-title>\r\n          <mat-card-subtitle *ngIf=\"subtitle\">{{ subtitle | bcEllipsis:40 }}</mat-card-subtitle>\r\n        </mat-card-title-group>\r\n        <mat-card-content>\r\n          <p *ngIf=\"description\">{{ description | bcEllipsis }}</p>\r\n        </mat-card-content>\r\n        <mat-card-footer>\r\n          <bc-book-authors [book]=\"book\"></bc-book-authors>\r\n        </mat-card-footer>\r\n      </mat-card>\r\n    </a>\r\n  `,\r\n  styles: [\r\n    `\r\n      :host {\r\n        display: flex;\r\n      }\r\n\r\n      :host a {\r\n        display: flex;\r\n      }\r\n\r\n      mat-card {\r\n        width: 400px;\r\n        margin: 15px;\r\n        display: flex;\r\n        flex-flow: column;\r\n        justify-content: space-between;\r\n      }\r\n\r\n      @media only screen and (max-width: 768px) {\r\n        mat-card {\r\n          margin: 15px 0 !important;\r\n        }\r\n      }\r\n      mat-card:hover {\r\n        box-shadow: 3px 3px 16px -2px rgba(0, 0, 0, 0.5);\r\n      }\r\n      mat-card-title {\r\n        margin-right: 10px;\r\n      }\r\n      mat-card-title-group {\r\n        margin: 0;\r\n      }\r\n      a {\r\n        color: inherit;\r\n        text-decoration: none;\r\n      }\r\n      img {\r\n        width: 60px;\r\n        min-width: 60px;\r\n        margin-left: 5px;\r\n      }\r\n      mat-card-content {\r\n        margin-top: 15px;\r\n        margin: 15px 0 0;\r\n      }\r\n      span {\r\n        display: inline-block;\r\n        font-size: 13px;\r\n      }\r\n      mat-card-footer {\r\n        padding: 0 25px 25px;\r\n      }\r\n    `,\r\n  ],\r\n})\r\nexport class BookPreviewComponent {\r\n  @Input() book: Book;\r\n\r\n  get id() {\r\n    return this.book.id;\r\n  }\r\n\r\n  get title() {\r\n    return this.book.volumeInfo.title;\r\n  }\r\n\r\n  get subtitle() {\r\n    return this.book.volumeInfo.subtitle;\r\n  }\r\n\r\n  get description() {\r\n    return this.book.volumeInfo.description;\r\n  }\r\n\r\n  get thumbnail(): string | boolean {\r\n    if (this.book.volumeInfo.imageLinks) {\r\n      return this.book.volumeInfo.imageLinks.smallThumbnail.replace(\r\n        'http:',\r\n        ''\r\n      );\r\n    }\r\n\r\n    return false;\r\n  }\r\n}\r\n","projects/example-app/src/app/books/components/book-search.component.ts":"import { Component, Output, Input, EventEmitter } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'bc-book-search',\r\n  template: `\r\n    <mat-card>\r\n      <mat-card-title>Find a Book</mat-card-title>\r\n      <mat-card-content>\r\n        <mat-form-field>\r\n          <input matInput placeholder=\"Search for a book\" [value]=\"query\" (keyup)=\"search.emit($event.target.value)\">\r\n        </mat-form-field>\r\n        <mat-spinner [class.show]=\"searching\" [diameter]=\"30\" [strokeWidth]=\"3\"></mat-spinner>\r\n      </mat-card-content>\r\n      <mat-card-footer><span *ngIf=\"error\">{{error}}</span></mat-card-footer>\r\n    </mat-card>\r\n  `,\r\n  styles: [\r\n    `\r\n      mat-card-title,\r\n      mat-card-content,\r\n      mat-card-footer {\r\n        display: flex;\r\n        justify-content: center;\r\n      }\r\n\r\n      mat-card-footer {\r\n        color: #ff0000;\r\n        padding: 5px 0;\r\n      }\r\n\r\n      .mat-form-field {\r\n        min-width: 300px;\r\n        margin-right: 10px; // Make room for the spinner\r\n      }\r\n\r\n      .mat-spinner {\r\n        position: relative;\r\n        top: 10px;\r\n        left: 10px;\r\n        visibility: hidden;\r\n      }\r\n\r\n      .mat-spinner.show {\r\n        visibility: visible;\r\n      }\r\n    `,\r\n  ],\r\n})\r\nexport class BookSearchComponent {\r\n  @Input() query = '';\r\n  @Input() searching = false;\r\n  @Input() error = '';\r\n  @Output() search = new EventEmitter<string>();\r\n}\r\n","projects/example-app/src/app/books/components/index.ts":"import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport { BookAuthorsComponent } from './book-authors.component';\r\nimport { BookDetailComponent } from './book-detail.component';\r\nimport { BookPreviewComponent } from './book-preview.component';\r\nimport { BookPreviewListComponent } from './book-preview-list.component';\r\nimport { BookSearchComponent } from './book-search.component';\r\nimport { MaterialModule } from '../../material';\r\nimport { PipesModule } from '../../shared/pipes';\r\n\r\nexport const COMPONENTS = [\r\n  BookAuthorsComponent,\r\n  BookDetailComponent,\r\n  BookPreviewComponent,\r\n  BookPreviewListComponent,\r\n  BookSearchComponent,\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    ReactiveFormsModule,\r\n    MaterialModule,\r\n    RouterModule,\r\n    PipesModule,\r\n  ],\r\n  declarations: COMPONENTS,\r\n  exports: COMPONENTS,\r\n})\r\nexport class ComponentsModule {}\r\n","projects/example-app/src/app/books/containers/collection-page.component.ts":"import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\r\nimport { select, Store } from '@ngrx/store';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport * as fromBooks from '../../books/reducers';\r\nimport { Book } from '../models/book';\r\nimport { CollectionPageActions } from '../actions';\r\n\r\n@Component({\r\n  selector: 'bc-collection-page',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  template: `\r\n    <mat-card>\r\n      <mat-card-title>My Collection</mat-card-title>\r\n    </mat-card>\r\n\r\n    <bc-book-preview-list [books]=\"books$ | async\"></bc-book-preview-list>\r\n  `,\r\n  /**\r\n   * Container components are permitted to have just enough styles\r\n   * to bring the view together. If the number of styles grow,\r\n   * consider breaking them out into presentational\r\n   * components.\r\n   */\r\n  styles: [\r\n    `\r\n      mat-card-title {\r\n        display: flex;\r\n        justify-content: center;\r\n      }\r\n    `,\r\n  ],\r\n})\r\nexport class CollectionPageComponent implements OnInit {\r\n  books$: Observable<Book[]>;\r\n\r\n  constructor(private store: Store<fromBooks.State>) {\r\n    this.books$ = store.pipe(select(fromBooks.getBookCollection));\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.store.dispatch(CollectionPageActions.loadCollection());\r\n  }\r\n}\r\n","projects/example-app/src/app/books/containers/find-book-page.component.ts":"import { ChangeDetectionStrategy, Component } from '@angular/core';\r\nimport { select, Store } from '@ngrx/store';\r\nimport { Observable } from 'rxjs';\r\nimport { take } from 'rxjs/operators';\r\n\r\nimport * as fromBooks from '../../books/reducers';\r\nimport { FindBookPageActions } from '../actions';\r\nimport { Book } from '../models/book';\r\n\r\n@Component({\r\n  selector: 'bc-find-book-page',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  template: `\r\n    <bc-book-search\r\n      [query]=\"searchQuery$ | async\"\r\n      [searching]=\"loading$ | async\"\r\n      [error]=\"error$ | async\"\r\n      (search)=\"search($event)\">\r\n    </bc-book-search>\r\n    <bc-book-preview-list\r\n      [books]=\"books$ | async\">\r\n    </bc-book-preview-list>\r\n  `,\r\n})\r\nexport class FindBookPageComponent {\r\n  searchQuery$: Observable<string>;\r\n  books$: Observable<Book[]>;\r\n  loading$: Observable<boolean>;\r\n  error$: Observable<string>;\r\n\r\n  constructor(private store: Store<fromBooks.State>) {\r\n    this.searchQuery$ = store.pipe(\r\n      select(fromBooks.getSearchQuery),\r\n      take(1)\r\n    );\r\n    this.books$ = store.pipe(select(fromBooks.getSearchResults));\r\n    this.loading$ = store.pipe(select(fromBooks.getSearchLoading));\r\n    this.error$ = store.pipe(select(fromBooks.getSearchError));\r\n  }\r\n\r\n  search(query: string) {\r\n    this.store.dispatch(FindBookPageActions.searchBooks({ query }));\r\n  }\r\n}\r\n","projects/example-app/src/app/books/containers/selected-book-page.component.ts":"import { Component, ChangeDetectionStrategy } from '@angular/core';\r\nimport { Store, select } from '@ngrx/store';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport * as fromBooks from '../../books/reducers';\r\nimport { SelectedBookPageActions } from '../actions';\r\nimport { Book } from '../models/book';\r\n\r\n@Component({\r\n  selector: 'bc-selected-book-page',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  template: `\r\n    <bc-book-detail\r\n      [book]=\"book$ | async\"\r\n      [inCollection]=\"isSelectedBookInCollection$ | async\"\r\n      (add)=\"addToCollection($event)\"\r\n      (remove)=\"removeFromCollection($event)\">\r\n    </bc-book-detail>\r\n  `,\r\n})\r\nexport class SelectedBookPageComponent {\r\n  book$: Observable<Book>;\r\n  isSelectedBookInCollection$: Observable<boolean>;\r\n\r\n  constructor(private store: Store<fromBooks.State>) {\r\n    this.book$ = store.pipe(select(fromBooks.getSelectedBook)) as Observable<\r\n      Book\r\n    >;\r\n    this.isSelectedBookInCollection$ = store.pipe(\r\n      select(fromBooks.isSelectedBookInCollection)\r\n    );\r\n  }\r\n\r\n  addToCollection(book: Book) {\r\n    this.store.dispatch(SelectedBookPageActions.addBook({ book }));\r\n  }\r\n\r\n  removeFromCollection(book: Book) {\r\n    this.store.dispatch(SelectedBookPageActions.removeBook({ book }));\r\n  }\r\n}\r\n","projects/example-app/src/app/books/containers/view-book-page.component.ts":"import { Component, OnDestroy, ChangeDetectionStrategy } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { Subscription } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\nimport * as fromBooks from '../../books/reducers';\r\nimport { ViewBookPageActions } from '../actions';\r\n\r\n/**\r\n * Note: Container components are also reusable. Whether or not\r\n * a component is a presentation component or a container\r\n * component is an implementation detail.\r\n *\r\n * The View Book Page's responsibility is to map router params\r\n * to a 'Select' book action. Actually showing the selected\r\n * book remains a responsibility of the\r\n * SelectedBookPageComponent\r\n */\r\n@Component({\r\n  selector: 'bc-view-book-page',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  template: `\r\n    <bc-selected-book-page></bc-selected-book-page>\r\n  `,\r\n})\r\nexport class ViewBookPageComponent implements OnDestroy {\r\n  actionsSubscription: Subscription;\r\n\r\n  constructor(store: Store<fromBooks.State>, route: ActivatedRoute) {\r\n    this.actionsSubscription = route.params\r\n      .pipe(map(params => ViewBookPageActions.selectBook({ id: params.id })))\r\n      .subscribe(store);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.actionsSubscription.unsubscribe();\r\n  }\r\n}\r\n","projects/example-app/src/app/books/effects/book.effects.ts":"import { Inject, Injectable, InjectionToken, Optional } from '@angular/core';\r\nimport { Actions, Effect, ofType } from '@ngrx/effects';\r\nimport { Action } from '@ngrx/store';\r\nimport { asyncScheduler, EMPTY as empty, Observable, of } from 'rxjs';\r\nimport {\r\n  catchError,\r\n  debounceTime,\r\n  map,\r\n  skip,\r\n  switchMap,\r\n  takeUntil,\r\n} from 'rxjs/operators';\r\nimport { FindBookPageActions, BooksApiActions } from '../actions';\r\nimport { Book } from '../models/book';\r\nimport { GoogleBooksService } from '../../core/services/google-books.service';\r\n\r\n/**\r\n * Effects offer a way to isolate and easily test side-effects within your\r\n * application.\r\n *\r\n * If you are unfamiliar with the operators being used in these examples, please\r\n * check out the sources below:\r\n *\r\n * Official Docs: http://reactivex.io/rxjs/manual/overview.html#categories-of-operators\r\n * RxJS 5 Operators By Example: https://gist.github.com/btroncone/d6cf141d6f2c00dc6b35\r\n */\r\n\r\n@Injectable()\r\nexport class BookEffects {\r\n  @Effect()\r\n  search$ = ({ debounce = 300, scheduler = asyncScheduler } = {}): Observable<\r\n    Action\r\n  > =>\r\n    this.actions$.pipe(\r\n      ofType(FindBookPageActions.searchBooks.type),\r\n      debounceTime(debounce, scheduler),\r\n      switchMap(({ query }) => {\r\n        if (query === '') {\r\n          return empty;\r\n        }\r\n\r\n        const nextSearch$ = this.actions$.pipe(\r\n          ofType(FindBookPageActions.searchBooks.type),\r\n          skip(1)\r\n        );\r\n\r\n        return this.googleBooks.searchBooks(query).pipe(\r\n          takeUntil(nextSearch$),\r\n          map((books: Book[]) => BooksApiActions.searchSuccess({ books })),\r\n          catchError(err =>\r\n            of(BooksApiActions.searchFailure({ errorMsg: err }))\r\n          )\r\n        );\r\n      })\r\n    );\r\n\r\n  constructor(\r\n    private actions$: Actions<FindBookPageActions.FindBookPageActionsUnion>,\r\n    private googleBooks: GoogleBooksService\r\n  ) {}\r\n}\r\n","projects/example-app/src/app/books/effects/collection.effects.ts":"import { Injectable } from '@angular/core';\r\nimport { Database } from '@ngrx/db';\r\nimport { Actions, Effect, ofType } from '@ngrx/effects';\r\nimport { Action } from '@ngrx/store';\r\nimport { defer, Observable, of } from 'rxjs';\r\nimport { catchError, map, mergeMap, switchMap, toArray } from 'rxjs/operators';\r\nimport {\r\n  CollectionPageActions,\r\n  CollectionApiActions,\r\n  SelectedBookPageActions,\r\n} from '../actions';\r\nimport { Book } from '../models/book';\r\n\r\n@Injectable()\r\nexport class CollectionEffects {\r\n  /**\r\n   * This effect does not yield any actions back to the store. Set\r\n   * `dispatch` to false to hint to @ngrx/effects that it should\r\n   * ignore any elements of this effect stream.\r\n   *\r\n   * The `defer` observable accepts an observable factory function\r\n   * that is called when the observable is subscribed to.\r\n   * Wrapping the database open call in `defer` makes\r\n   * effect easier to test.\r\n   */\r\n  @Effect({ dispatch: false })\r\n  openDB$: Observable<any> = defer(() => {\r\n    return this.db.open('books_app');\r\n  });\r\n\r\n  @Effect()\r\n  loadCollection$: Observable<Action> = this.actions$.pipe(\r\n    ofType(CollectionPageActions.loadCollection.type),\r\n    switchMap(() =>\r\n      this.db.query('books').pipe(\r\n        toArray(),\r\n        map((books: Book[]) =>\r\n          CollectionApiActions.loadBooksSuccess({ books })\r\n        ),\r\n        catchError(error =>\r\n          of(CollectionApiActions.loadBooksFailure({ error }))\r\n        )\r\n      )\r\n    )\r\n  );\r\n\r\n  @Effect()\r\n  addBookToCollection$: Observable<Action> = this.actions$.pipe(\r\n    ofType(SelectedBookPageActions.addBook.type),\r\n    mergeMap(({ book }) =>\r\n      this.db.insert('books', [book]).pipe(\r\n        map(() => CollectionApiActions.addBookSuccess({ book })),\r\n        catchError(() => of(CollectionApiActions.addBookFailure({ book })))\r\n      )\r\n    )\r\n  );\r\n\r\n  @Effect()\r\n  removeBookFromCollection$: Observable<Action> = this.actions$.pipe(\r\n    ofType(SelectedBookPageActions.removeBook.type),\r\n    mergeMap(({ book }) =>\r\n      this.db.executeWrite('books', 'delete', [book.id]).pipe(\r\n        map(() => CollectionApiActions.removeBookSuccess({ book })),\r\n        catchError(() => of(CollectionApiActions.removeBookFailure({ book })))\r\n      )\r\n    )\r\n  );\r\n\r\n  constructor(\r\n    private actions$: Actions<\r\n      SelectedBookPageActions.SelectedBookPageActionsUnion\r\n    >,\r\n    private db: Database\r\n  ) {}\r\n}\r\n","projects/example-app/src/app/books/guards/book-exists.guard.ts":"import { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, CanActivate, Router } from '@angular/router';\r\nimport { select, Store } from '@ngrx/store';\r\nimport { Observable, of } from 'rxjs';\r\nimport { catchError, filter, map, switchMap, take, tap } from 'rxjs/operators';\r\n\r\nimport * as fromBooks from '../../books/reducers';\r\nimport { GoogleBooksService } from '../../core/services/google-books.service';\r\nimport { BookActions } from '../actions';\r\n\r\n/**\r\n * Guards are hooks into the route resolution process, providing an opportunity\r\n * to inform the router's navigation process whether the route should continue\r\n * to activate this route. Guards must return an observable of true or false.\r\n */\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class BookExistsGuard implements CanActivate {\r\n  constructor(\r\n    private store: Store<fromBooks.State>,\r\n    private googleBooks: GoogleBooksService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  /**\r\n   * This method creates an observable that waits for the `loaded` property\r\n   * of the collection state to turn `true`, emitting one time once loading\r\n   * has finished.\r\n   */\r\n  waitForCollectionToLoad(): Observable<boolean> {\r\n    return this.store.pipe(\r\n      select(fromBooks.getCollectionLoaded),\r\n      filter(loaded => loaded),\r\n      take(1)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * This method checks if a book with the given ID is already registered\r\n   * in the Store\r\n   */\r\n  hasBookInStore(id: string): Observable<boolean> {\r\n    return this.store.pipe(\r\n      select(fromBooks.getBookEntities),\r\n      map(entities => !!entities[id]),\r\n      take(1)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * This method loads a book with the given ID from the API and caches\r\n   * it in the store, returning `true` or `false` if it was found.\r\n   */\r\n  hasBookInApi(id: string): Observable<boolean> {\r\n    return this.googleBooks.retrieveBook(id).pipe(\r\n      map(bookEntity => BookActions.loadBook({ book: bookEntity })),\r\n      tap(action => this.store.dispatch(action)),\r\n      map(book => !!book),\r\n      catchError(() => {\r\n        this.router.navigate(['/404']);\r\n        return of(false);\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * `hasBook` composes `hasBookInStore` and `hasBookInApi`. It first checks\r\n   * if the book is in store, and if not it then checks if it is in the\r\n   * API.\r\n   */\r\n  hasBook(id: string): Observable<boolean> {\r\n    return this.hasBookInStore(id).pipe(\r\n      switchMap(inStore => {\r\n        if (inStore) {\r\n          return of(inStore);\r\n        }\r\n\r\n        return this.hasBookInApi(id);\r\n      })\r\n    );\r\n  }\r\n\r\n  /**\r\n   * This is the actual method the router will call when our guard is run.\r\n   *\r\n   * Our guard waits for the collection to load, then it checks if we need\r\n   * to request a book from the API or if we already have it in our cache.\r\n   * If it finds it in the cache or in the API, it returns an Observable\r\n   * of `true` and the route is rendered successfully.\r\n   *\r\n   * If it was unable to find it in our cache or in the API, this guard\r\n   * will return an Observable of `false`, causing the router to move\r\n   * on to the next candidate route. In this case, it will move on\r\n   * to the 404 page.\r\n   */\r\n  canActivate(route: ActivatedRouteSnapshot): Observable<boolean> {\r\n    return this.waitForCollectionToLoad().pipe(\r\n      switchMap(() => this.hasBook(route.params['id']))\r\n    );\r\n  }\r\n}\r\n","projects/example-app/src/app/books/models/book.ts":"export interface Book {\r\n  id: string;\r\n  volumeInfo: {\r\n    title: string;\r\n    subtitle: string;\r\n    authors: string[];\r\n    publisher: string;\r\n    publishDate: string;\r\n    description: string;\r\n    averageRating: number;\r\n    ratingsCount: number;\r\n    imageLinks: {\r\n      thumbnail: string;\r\n      smallThumbnail: string;\r\n    };\r\n  };\r\n}\r\n\r\nexport function generateMockBook(): Book {\r\n  return {\r\n    id: '1',\r\n    volumeInfo: {\r\n      title: 'title',\r\n      subtitle: 'subtitle',\r\n      authors: ['author'],\r\n      publisher: 'publisher',\r\n      publishDate: '',\r\n      description: 'description',\r\n      averageRating: 3,\r\n      ratingsCount: 5,\r\n      imageLinks: {\r\n        thumbnail: 'string',\r\n        smallThumbnail: 'string',\r\n      },\r\n    },\r\n  };\r\n}\r\n","projects/example-app/src/app/books/reducers/books.reducer.ts":"import { createEntityAdapter, EntityAdapter, EntityState } from '@ngrx/entity';\r\nimport { Book } from '../models/book';\r\nimport {\r\n  BooksApiActions,\r\n  BookActions,\r\n  ViewBookPageActions,\r\n  CollectionApiActions,\r\n} from '../actions';\r\n\r\n/**\r\n * @ngrx/entity provides a predefined interface for handling\r\n * a structured dictionary of records. This interface\r\n * includes an array of ids, and a dictionary of the provided\r\n * model type by id. This interface is extended to include\r\n * any additional interface properties.\r\n */\r\nexport interface State extends EntityState<Book> {\r\n  selectedBookId: string | null;\r\n}\r\n\r\n/**\r\n * createEntityAdapter creates an object of many helper\r\n * functions for single or multiple operations\r\n * against the dictionary of records. The configuration\r\n * object takes a record id selector function and\r\n * a sortComparer option which is set to a compare\r\n * function if the records are to be sorted.\r\n */\r\nexport const adapter: EntityAdapter<Book> = createEntityAdapter<Book>({\r\n  selectId: (book: Book) => book.id,\r\n  sortComparer: false,\r\n});\r\n\r\n/**\r\n * getInitialState returns the default initial state\r\n * for the generated entity state. Initial state\r\n * additional properties can also be defined.\r\n */\r\nexport const initialState: State = adapter.getInitialState({\r\n  selectedBookId: null,\r\n});\r\n\r\nexport function reducer(\r\n  state = initialState,\r\n  action:\r\n    | BooksApiActions.BooksApiActionsUnion\r\n    | BookActions.BookActionsUnion\r\n    | ViewBookPageActions.ViewBookPageActionsUnion\r\n    | CollectionApiActions.CollectionApiActionsUnion\r\n): State {\r\n  switch (action.type) {\r\n    case BooksApiActions.searchSuccess.type:\r\n    case CollectionApiActions.loadBooksSuccess.type: {\r\n      /**\r\n       * The addMany function provided by the created adapter\r\n       * adds many records to the entity dictionary\r\n       * and returns a new state including those records. If\r\n       * the collection is to be sorted, the adapter will\r\n       * sort each record upon entry into the sorted array.\r\n       */\r\n      return adapter.addMany(action.books, state);\r\n    }\r\n\r\n    case BookActions.loadBook.type: {\r\n      /**\r\n       * The addOne function provided by the created adapter\r\n       * adds one record to the entity dictionary\r\n       * and returns a new state including that records if it doesn't\r\n       * exist already. If the collection is to be sorted, the adapter will\r\n       * insert the new record into the sorted array.\r\n       */\r\n      return adapter.addOne(action.book, state);\r\n    }\r\n\r\n    case ViewBookPageActions.selectBook.type: {\r\n      return {\r\n        ...state,\r\n        selectedBookId: action.id,\r\n      };\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Because the data structure is defined within the reducer it is optimal to\r\n * locate our selector functions at this level. If store is to be thought of\r\n * as a database, and reducers the tables, selectors can be considered the\r\n * queries into said database. Remember to keep your selectors small and\r\n * focused so they can be combined and composed to fit each particular\r\n * use-case.\r\n */\r\n\r\nexport const getSelectedId = (state: State) => state.selectedBookId;\r\n","projects/example-app/src/app/books/reducers/collection.reducer.ts":"import {\r\n  SelectedBookPageActions,\r\n  CollectionPageActions,\r\n  CollectionApiActions,\r\n} from '../actions';\r\n\r\nexport interface State {\r\n  loaded: boolean;\r\n  loading: boolean;\r\n  ids: string[];\r\n}\r\n\r\nconst initialState: State = {\r\n  loaded: false,\r\n  loading: false,\r\n  ids: [],\r\n};\r\n\r\nexport function reducer(\r\n  state = initialState,\r\n  action:\r\n    | SelectedBookPageActions.SelectedBookPageActionsUnion\r\n    | CollectionPageActions.CollectionPageActionsUnion\r\n    | CollectionApiActions.CollectionApiActionsUnion\r\n): State {\r\n  switch (action.type) {\r\n    case CollectionPageActions.loadCollection.type: {\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n      };\r\n    }\r\n\r\n    case CollectionApiActions.loadBooksSuccess.type: {\r\n      return {\r\n        loaded: true,\r\n        loading: false,\r\n        ids: action.books.map(book => book.id),\r\n      };\r\n    }\r\n\r\n    case CollectionApiActions.addBookSuccess.type:\r\n    case CollectionApiActions.removeBookFailure.type: {\r\n      if (state.ids.indexOf(action.book.id) > -1) {\r\n        return state;\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        ids: [...state.ids, action.book.id],\r\n      };\r\n    }\r\n\r\n    case CollectionApiActions.removeBookSuccess.type:\r\n    case CollectionApiActions.addBookFailure.type: {\r\n      return {\r\n        ...state,\r\n        ids: state.ids.filter(id => id !== action.book.id),\r\n      };\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n\r\nexport const getLoaded = (state: State) => state.loaded;\r\n\r\nexport const getLoading = (state: State) => state.loading;\r\n\r\nexport const getIds = (state: State) => state.ids;\r\n","projects/example-app/src/app/books/reducers/index.ts":"import {\r\n  createSelector,\r\n  createFeatureSelector,\r\n  ActionReducerMap,\r\n} from '@ngrx/store';\r\nimport * as fromSearch from '../../books/reducers/search.reducer';\r\nimport * as fromBooks from '../../books/reducers/books.reducer';\r\nimport * as fromCollection from '../../books/reducers/collection.reducer';\r\nimport * as fromRoot from '../../reducers';\r\n\r\nexport interface BooksState {\r\n  search: fromSearch.State;\r\n  books: fromBooks.State;\r\n  collection: fromCollection.State;\r\n}\r\n\r\nexport interface State extends fromRoot.State {\r\n  books: BooksState;\r\n}\r\n\r\nexport const reducers: ActionReducerMap<BooksState, any> = {\r\n  search: fromSearch.reducer,\r\n  books: fromBooks.reducer,\r\n  collection: fromCollection.reducer,\r\n};\r\n\r\n/**\r\n * A selector function is a map function factory. We pass it parameters and it\r\n * returns a function that maps from the larger state tree into a smaller\r\n * piece of state. This selector simply selects the `books` state.\r\n *\r\n * Selectors are used with the `select` operator.\r\n *\r\n * ```ts\r\n * class MyComponent {\r\n *   constructor(state$: Observable<State>) {\r\n *     this.booksState$ = state$.pipe(select(getBooksState));\r\n *   }\r\n * }\r\n * ```\r\n */\r\n\r\n/**\r\n * The createFeatureSelector function selects a piece of state from the root of the state object.\r\n * This is used for selecting feature states that are loaded eagerly or lazily.\r\n */\r\nexport const getBooksState = createFeatureSelector<State, BooksState>('books');\r\n\r\n/**\r\n * Every reducer module exports selector functions, however child reducers\r\n * have no knowledge of the overall state tree. To make them usable, we\r\n * need to make new selectors that wrap them.\r\n *\r\n * The createSelector function creates very efficient selectors that are memoized and\r\n * only recompute when arguments change. The created selectors can also be composed\r\n * together to select different pieces of state.\r\n */\r\nexport const getBookEntitiesState = createSelector(\r\n  getBooksState,\r\n  state => state.books\r\n);\r\n\r\nexport const getSelectedBookId = createSelector(\r\n  getBookEntitiesState,\r\n  fromBooks.getSelectedId\r\n);\r\n\r\n/**\r\n * Adapters created with @ngrx/entity generate\r\n * commonly used selector functions including\r\n * getting all ids in the record set, a dictionary\r\n * of the records by id, an array of records and\r\n * the total number of records. This reduces boilerplate\r\n * in selecting records from the entity state.\r\n */\r\nexport const {\r\n  selectIds: getBookIds,\r\n  selectEntities: getBookEntities,\r\n  selectAll: getAllBooks,\r\n  selectTotal: getTotalBooks,\r\n} = fromBooks.adapter.getSelectors(getBookEntitiesState);\r\n\r\nexport const getSelectedBook = createSelector(\r\n  getBookEntities,\r\n  getSelectedBookId,\r\n  (entities, selectedId) => {\r\n    return selectedId && entities[selectedId];\r\n  }\r\n);\r\n\r\n/**\r\n * Just like with the books selectors, we also have to compose the search\r\n * reducer's and collection reducer's selectors.\r\n */\r\nexport const getSearchState = createSelector(\r\n  getBooksState,\r\n  (state: BooksState) => state.search\r\n);\r\n\r\nexport const getSearchBookIds = createSelector(\r\n  getSearchState,\r\n  fromSearch.getIds\r\n);\r\nexport const getSearchQuery = createSelector(\r\n  getSearchState,\r\n  fromSearch.getQuery\r\n);\r\nexport const getSearchLoading = createSelector(\r\n  getSearchState,\r\n  fromSearch.getLoading\r\n);\r\nexport const getSearchError = createSelector(\r\n  getSearchState,\r\n  fromSearch.getError\r\n);\r\n\r\n/**\r\n * Some selector functions create joins across parts of state. This selector\r\n * composes the search result IDs to return an array of books in the store.\r\n */\r\nexport const getSearchResults = createSelector(\r\n  getBookEntities,\r\n  getSearchBookIds,\r\n  (books, searchIds) => {\r\n    return searchIds.map(id => books[id]);\r\n  }\r\n);\r\n\r\nexport const getCollectionState = createSelector(\r\n  getBooksState,\r\n  (state: BooksState) => state.collection\r\n);\r\n\r\nexport const getCollectionLoaded = createSelector(\r\n  getCollectionState,\r\n  fromCollection.getLoaded\r\n);\r\nexport const getCollectionLoading = createSelector(\r\n  getCollectionState,\r\n  fromCollection.getLoading\r\n);\r\nexport const getCollectionBookIds = createSelector(\r\n  getCollectionState,\r\n  fromCollection.getIds\r\n);\r\n\r\nexport const getBookCollection = createSelector(\r\n  getBookEntities,\r\n  getCollectionBookIds,\r\n  (entities, ids) => {\r\n    return ids.map(id => entities[id]);\r\n  }\r\n);\r\n\r\nexport const isSelectedBookInCollection = createSelector(\r\n  getCollectionBookIds,\r\n  getSelectedBookId,\r\n  (ids, selected) => {\r\n    return !!selected && ids.indexOf(selected) > -1;\r\n  }\r\n);\r\n","projects/example-app/src/app/books/reducers/search.reducer.ts":"import { BooksApiActions, FindBookPageActions } from '../actions';\r\n\r\nexport interface State {\r\n  ids: string[];\r\n  loading: boolean;\r\n  error: string;\r\n  query: string;\r\n}\r\n\r\nconst initialState: State = {\r\n  ids: [],\r\n  loading: false,\r\n  error: '',\r\n  query: '',\r\n};\r\n\r\nexport function reducer(\r\n  state = initialState,\r\n  action:\r\n    | BooksApiActions.BooksApiActionsUnion\r\n    | FindBookPageActions.FindBookPageActionsUnion\r\n): State {\r\n  switch (action.type) {\r\n    case FindBookPageActions.searchBooks.type: {\r\n      const query = action.query;\r\n\r\n      if (query === '') {\r\n        return {\r\n          ids: [],\r\n          loading: false,\r\n          error: '',\r\n          query,\r\n        };\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n        error: '',\r\n        query,\r\n      };\r\n    }\r\n\r\n    case BooksApiActions.searchSuccess.type: {\r\n      return {\r\n        ids: action.books.map(book => book.id),\r\n        loading: false,\r\n        error: '',\r\n        query: state.query,\r\n      };\r\n    }\r\n\r\n    case BooksApiActions.searchFailure.type: {\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: action.errorMsg,\r\n      };\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n\r\nexport const getIds = (state: State) => state.ids;\r\n\r\nexport const getQuery = (state: State) => state.query;\r\n\r\nexport const getLoading = (state: State) => state.loading;\r\n\r\nexport const getError = (state: State) => state.error;\r\n","projects/example-app/src/app/core/actions/index.ts":"import * as LayoutActions from './layout.actions';\r\n\r\nexport { LayoutActions };\r\n","projects/example-app/src/app/core/actions/layout.actions.ts":"import { createAction, union } from '@ngrx/store';\r\n\r\nexport const openSidenav = createAction('[Layout] Open Sidenav');\r\nexport const closeSidenav = createAction('[Layout] Close Sidenav');\r\n\r\nconst all = union({ openSidenav, closeSidenav });\r\nexport type LayoutActionsUnion = typeof all;\r\n","projects/example-app/src/app/core/components/layout.component.ts":"import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'bc-layout',\r\n  template: `\r\n    <mat-sidenav-container fullscreen>\r\n\r\n      <ng-content></ng-content>\r\n\r\n    </mat-sidenav-container>\r\n  `,\r\n  styles: [\r\n    `\r\n      mat-sidenav-container {\r\n        background: rgba(0, 0, 0, 0.03);\r\n      }\r\n\r\n      *,\r\n      /deep/ * {\r\n        -webkit-font-smoothing: antialiased;\r\n        -moz-osx-font-smoothing: grayscale;\r\n      }\r\n    `,\r\n  ],\r\n})\r\nexport class LayoutComponent {}\r\n","projects/example-app/src/app/core/components/nav-item.component.ts":"import { Component, Input, Output, EventEmitter } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'bc-nav-item',\r\n  template: `\r\n    <a mat-list-item [routerLink]=\"routerLink\" (click)=\"navigate.emit()\">\r\n      <mat-icon mat-list-icon>{{ icon }}</mat-icon>\r\n      <span mat-line><ng-content></ng-content></span>\r\n      <span mat-line class=\"secondary\">{{ hint }}</span>\r\n    </a>\r\n  `,\r\n  styles: [\r\n    `\r\n      .secondary {\r\n        color: rgba(0, 0, 0, 0.54);\r\n      }\r\n    `,\r\n  ],\r\n})\r\nexport class NavItemComponent {\r\n  @Input() icon = '';\r\n  @Input() hint = '';\r\n  @Input() routerLink: string | any[] = '/';\r\n  @Output() navigate = new EventEmitter();\r\n}\r\n","projects/example-app/src/app/core/components/sidenav.component.ts":"import { Component, EventEmitter, Input, Output } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'bc-sidenav',\r\n  template: `\r\n    <mat-sidenav #sidenav [opened]=\"open\" (keydown.escape)=\"sidenav.close()\" (closedStart)=\"closeMenu.emit()\" disableClose>\r\n      <mat-nav-list>\r\n        <ng-content></ng-content>\r\n      </mat-nav-list>\r\n    </mat-sidenav>\r\n  `,\r\n  styles: [\r\n    `\r\n      mat-sidenav {\r\n        width: 300px;\r\n      }\r\n    `,\r\n  ],\r\n})\r\nexport class SidenavComponent {\r\n  @Input() open = false;\r\n  @Output() closeMenu = new EventEmitter();\r\n}\r\n","projects/example-app/src/app/core/components/toolbar.component.ts":"import { Component, Output, EventEmitter } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'bc-toolbar',\r\n  template: `\r\n    <mat-toolbar color=\"primary\">\r\n      <button mat-icon-button (click)=\"openMenu.emit()\">\r\n        <mat-icon>menu</mat-icon>\r\n      </button>\r\n      <ng-content></ng-content>\r\n    </mat-toolbar>\r\n  `,\r\n})\r\nexport class ToolbarComponent {\r\n  @Output() openMenu = new EventEmitter();\r\n}\r\n","projects/example-app/src/app/core/containers/app.component.ts":"import { ChangeDetectionStrategy, Component } from '@angular/core';\r\nimport { select, Store } from '@ngrx/store';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport * as AuthActions from '../../auth/actions/auth.actions';\r\nimport * as fromAuth from '../../auth/reducers';\r\nimport * as fromRoot from '../../reducers';\r\nimport { LayoutActions } from '../actions';\r\n\r\n@Component({\r\n  selector: 'bc-app',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  template: `\r\n    <bc-layout>\r\n      <bc-sidenav [open]=\"showSidenav$ | async\" (closeMenu)=\"closeSidenav()\">\r\n        <bc-nav-item (navigate)=\"closeSidenav()\" *ngIf=\"loggedIn$ | async\" routerLink=\"/\" icon=\"book\" hint=\"View your book collection\">\r\n          My Collection\r\n        </bc-nav-item>\r\n        <bc-nav-item (navigate)=\"closeSidenav()\" *ngIf=\"loggedIn$ | async\" routerLink=\"/books/find\" icon=\"search\" hint=\"Find your next book!\">\r\n          Browse Books\r\n        </bc-nav-item>\r\n        <bc-nav-item (navigate)=\"closeSidenav()\" *ngIf=\"!(loggedIn$ | async)\">\r\n          Sign In\r\n        </bc-nav-item>\r\n        <bc-nav-item (navigate)=\"logout()\" *ngIf=\"loggedIn$ | async\">\r\n          Sign Out\r\n        </bc-nav-item>\r\n      </bc-sidenav>\r\n      <bc-toolbar (openMenu)=\"openSidenav()\">\r\n        Book Collection\r\n      </bc-toolbar>\r\n\r\n      <router-outlet></router-outlet>\r\n    </bc-layout>\r\n  `,\r\n})\r\nexport class AppComponent {\r\n  showSidenav$: Observable<boolean>;\r\n  loggedIn$: Observable<boolean>;\r\n\r\n  constructor(private store: Store<fromRoot.State & fromAuth.State>) {\r\n    /**\r\n     * Selectors can be applied with the `select` operator which passes the state\r\n     * tree to the provided selector\r\n     */\r\n    this.showSidenav$ = this.store.pipe(select(fromRoot.getShowSidenav));\r\n    this.loggedIn$ = this.store.pipe(select(fromAuth.getLoggedIn));\r\n  }\r\n\r\n  closeSidenav() {\r\n    /**\r\n     * All state updates are handled through dispatched actions in 'container'\r\n     * components. This provides a clear, reproducible history of state\r\n     * updates and user interaction through the life of our\r\n     * application.\r\n     */\r\n    this.store.dispatch(LayoutActions.closeSidenav());\r\n  }\r\n\r\n  openSidenav() {\r\n    this.store.dispatch(LayoutActions.openSidenav());\r\n  }\r\n\r\n  logout() {\r\n    this.closeSidenav();\r\n\r\n    this.store.dispatch(AuthActions.logoutConfirmation());\r\n  }\r\n}\r\n","projects/example-app/src/app/core/containers/not-found-page.component.ts":"import { Component, ChangeDetectionStrategy } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'bc-not-found-page',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  template: `\r\n    <mat-card>\r\n      <mat-card-title>404: Not Found</mat-card-title>\r\n      <mat-card-content>\r\n        <p>Hey! It looks like this page doesn't exist yet.</p>\r\n      </mat-card-content>\r\n      <mat-card-actions>\r\n        <button mat-raised-button color=\"primary\" routerLink=\"/\">Take Me Home</button>\r\n      </mat-card-actions>\r\n    </mat-card>\r\n  `,\r\n  styles: [\r\n    `\r\n      :host {\r\n        text-align: center;\r\n      }\r\n    `,\r\n  ],\r\n})\r\nexport class NotFoundPageComponent {}\r\n","projects/example-app/src/app/core/core.module.ts":"import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { AppComponent } from './containers/app.component';\r\nimport { NotFoundPageComponent } from './containers/not-found-page.component';\r\nimport { LayoutComponent } from './components/layout.component';\r\nimport { NavItemComponent } from './components/nav-item.component';\r\nimport { SidenavComponent } from './components/sidenav.component';\r\nimport { ToolbarComponent } from './components/toolbar.component';\r\nimport { MaterialModule } from '../material';\r\n\r\nexport const COMPONENTS = [\r\n  AppComponent,\r\n  NotFoundPageComponent,\r\n  LayoutComponent,\r\n  NavItemComponent,\r\n  SidenavComponent,\r\n  ToolbarComponent,\r\n];\r\n\r\n@NgModule({\r\n  imports: [CommonModule, RouterModule, MaterialModule],\r\n  declarations: COMPONENTS,\r\n  exports: COMPONENTS,\r\n})\r\nexport class CoreModule {}\r\n","projects/example-app/src/app/core/reducers/layout.reducer.ts":"import { Action } from '@ngrx/store';\r\nimport { LayoutActions } from '../actions';\r\n\r\nexport interface State {\r\n  showSidenav: boolean;\r\n}\r\n\r\nconst initialState: State = {\r\n  showSidenav: false,\r\n};\r\n\r\nexport function reducer(state: State = initialState, action: Action): State {\r\n  const specificAction = action as LayoutActions.LayoutActionsUnion;\r\n\r\n  switch (specificAction.type) {\r\n    case LayoutActions.closeSidenav.type:\r\n      return {\r\n        showSidenav: false,\r\n      };\r\n\r\n    case LayoutActions.openSidenav.type:\r\n      return {\r\n        showSidenav: true,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const getShowSidenav = (state: State) => state.showSidenav;\r\n","projects/example-app/src/app/core/services/google-books.service.ts":"import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { Book } from '../../books/models/book';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class GoogleBooksService {\r\n  private API_PATH = 'https://www.googleapis.com/books/v1/volumes';\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  searchBooks(queryTitle: string): Observable<Book[]> {\r\n    return this.http\r\n      .get<{ items: Book[] }>(`${this.API_PATH}?q=${queryTitle}`)\r\n      .pipe(map(books => books.items || []));\r\n  }\r\n\r\n  retrieveBook(volumeId: string): Observable<Book> {\r\n    return this.http.get<Book>(`${this.API_PATH}/${volumeId}`);\r\n  }\r\n}\r\n","projects/example-app/src/app/db.ts":"import { DBSchema } from '@ngrx/db';\r\n\r\n/**\r\n * ngrx/db uses a simple schema config object to initialize stores in IndexedDB.\r\n */\r\nexport const schema: DBSchema = {\r\n  version: 1,\r\n  name: 'books_app',\r\n  stores: {\r\n    books: {\r\n      autoIncrement: true,\r\n      primaryKey: 'id',\r\n    },\r\n  },\r\n};\r\n","projects/example-app/src/app/index.ts":"export * from './app.module';\r\n","projects/example-app/src/app/material/index.ts":"export * from './material.module';\r\n","projects/example-app/src/app/material/material.module.ts":"import { NgModule } from '@angular/core';\r\n\r\nimport {\r\n  MatInputModule,\r\n  MatCardModule,\r\n  MatButtonModule,\r\n  MatSidenavModule,\r\n  MatListModule,\r\n  MatIconModule,\r\n  MatToolbarModule,\r\n  MatProgressSpinnerModule,\r\n  MatDialogModule,\r\n} from '@angular/material';\r\n\r\n@NgModule({\r\n  imports: [\r\n    MatInputModule,\r\n    MatCardModule,\r\n    MatButtonModule,\r\n    MatSidenavModule,\r\n    MatListModule,\r\n    MatIconModule,\r\n    MatToolbarModule,\r\n    MatProgressSpinnerModule,\r\n    MatDialogModule,\r\n  ],\r\n  exports: [\r\n    MatInputModule,\r\n    MatCardModule,\r\n    MatButtonModule,\r\n    MatSidenavModule,\r\n    MatListModule,\r\n    MatIconModule,\r\n    MatToolbarModule,\r\n    MatProgressSpinnerModule,\r\n    MatDialogModule,\r\n  ],\r\n})\r\nexport class MaterialModule {}\r\n","projects/example-app/src/app/reducers/index.ts":"import {\r\n  ActionReducerMap,\r\n  createSelector,\r\n  createFeatureSelector,\r\n  ActionReducer,\r\n  MetaReducer,\r\n} from '@ngrx/store';\r\nimport { environment } from '../../environments/environment';\r\nimport * as fromRouter from '@ngrx/router-store';\r\n\r\n/**\r\n * storeFreeze prevents state from being mutated. When mutation occurs, an\r\n * exception will be thrown. This is useful during development mode to\r\n * ensure that none of the reducers accidentally mutates the state.\r\n */\r\nimport { storeFreeze } from 'ngrx-store-freeze';\r\n\r\n/**\r\n * Every reducer module's default export is the reducer function itself. In\r\n * addition, each module should export a type or interface that describes\r\n * the state of the reducer plus any selector functions. The `* as`\r\n * notation packages up all of the exports into a single object.\r\n */\r\n\r\nimport * as fromLayout from '../core/reducers/layout.reducer';\r\n\r\n/**\r\n * As mentioned, we treat each reducer like a table in a database. This means\r\n * our top level state interface is just a map of keys to inner state types.\r\n */\r\nexport interface State {\r\n  layout: fromLayout.State;\r\n  router: fromRouter.RouterReducerState;\r\n}\r\n\r\n/**\r\n * Our state is composed of a map of action reducer functions.\r\n * These reducer functions are called with each dispatched action\r\n * and the current or initial state and return a new immutable state.\r\n */\r\nexport const reducers: ActionReducerMap<State> = {\r\n  layout: fromLayout.reducer,\r\n  router: fromRouter.routerReducer,\r\n};\r\n\r\n// console.log all actions\r\nexport function logger(reducer: ActionReducer<State>): ActionReducer<State> {\r\n  return (state, action) => {\r\n    const result = reducer(state, action);\r\n    console.groupCollapsed(action.type);\r\n    console.log('prev state', state);\r\n    console.log('action', action);\r\n    console.log('next state', result);\r\n    console.groupEnd();\r\n\r\n    return result;\r\n  };\r\n}\r\n\r\n/**\r\n * By default, @ngrx/store uses combineReducers with the reducer map to compose\r\n * the root meta-reducer. To add more meta-reducers, provide an array of meta-reducers\r\n * that will be composed to form the root meta-reducer.\r\n */\r\nexport const metaReducers: MetaReducer<State>[] = !environment.production\r\n  ? [logger, storeFreeze]\r\n  : [];\r\n\r\n/**\r\n * Layout Reducers\r\n */\r\nexport const getLayoutState = createFeatureSelector<State, fromLayout.State>(\r\n  'layout'\r\n);\r\n\r\nexport const getShowSidenav = createSelector(\r\n  getLayoutState,\r\n  fromLayout.getShowSidenav\r\n);\r\n","projects/example-app/src/app/shared/pipes/add-commas.pipe.ts":"import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({ name: 'bcAddCommas' })\r\nexport class AddCommasPipe implements PipeTransform {\r\n  transform(authors: null | string[]) {\r\n    if (!authors) {\r\n      return 'Author Unknown';\r\n    }\r\n\r\n    switch (authors.length) {\r\n      case 0:\r\n        return 'Author Unknown';\r\n      case 1:\r\n        return authors[0];\r\n      case 2:\r\n        return authors.join(' and ');\r\n      default:\r\n        const last = authors[authors.length - 1];\r\n        const remaining = authors.slice(0, -1);\r\n        return `${remaining.join(', ')}, and ${last}`;\r\n    }\r\n  }\r\n}\r\n","projects/example-app/src/app/shared/pipes/ellipsis.pipe.ts":"import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({ name: 'bcEllipsis' })\r\nexport class EllipsisPipe implements PipeTransform {\r\n  transform(str: string, strLength: number = 250) {\r\n    const withoutHtml = str.replace(/(<([^>]+)>)/gi, '');\r\n\r\n    if (str.length >= strLength) {\r\n      return `${withoutHtml.slice(0, strLength)}...`;\r\n    }\r\n\r\n    return withoutHtml;\r\n  }\r\n}\r\n","projects/example-app/src/app/shared/pipes/index.ts":"import { NgModule } from '@angular/core';\r\nimport { AddCommasPipe } from './add-commas.pipe';\r\nimport { EllipsisPipe } from './ellipsis.pipe';\r\n\r\nexport const PIPES = [AddCommasPipe, EllipsisPipe];\r\n\r\n@NgModule({\r\n  declarations: PIPES,\r\n  exports: PIPES,\r\n})\r\nexport class PipesModule {}\r\n","projects/example-app/src/environments/environment.prod.ts":"export const environment = {\r\n  production: true,\r\n};\r\n","projects/example-app/src/environments/environment.ts":"export const environment = {\r\n  production: false,\r\n};\r\n","projects/example-app/src/favicon.ico":"\u0000\u0000\u0001\u0000\u0002\u0000\u0010\u0010\u0000\u0000\u0000\u0000 \u0000h\u0004\u0000\u0000&\u0000\u0000\u0000  \u0000\u0000\u0000\u0000 \u0000\u0010\u0000\u0000\u0004\u0000\u0000(\u0000\u0000\u0000\u0010\u0000\u0000\u0000 \u0000\u0000\u0000\u0001\u0000 \u0000\u0000\u0000\u0000\u0000@\u0004\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0001\u0001\u0001\u0001\u0001\u000171U610-2.;\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u00017197171710-0-1-3/#\u0001\u0001\u0001\u0001\u0001\u000171!71717171710-0-0-0-1-3/\u000f\u0001\u0001\u000171U71OIVQ8271710-0-0-URKH0-2.=\u0001\u00017171mh71710-0-[X0-1.{\u0001\u00017171C=71710-0-850-0-\u0001\u00017171710-0-1-\u0001\u0001717171QL?<0-0-0-\u0001\u000171717171;5:70-0-0-0-\u000171#71717171d_}yIG0-0-0-0-4/\u000f71M71717171710-0-0-0-0-3/A71k7171717171zvVS0-0-0-0-0-2.e71}7171717171930-0-0-0-0-0-1.{71A717171717171db0-0-0-0-0-1-0-E\u0001\u000171)71717171=70-0-0-0-1-3//\u0001\u0001\u0001\u0001\u0001\u0001\u000171A71610-0-3.9\u0001\u0001\u0001\u0001\u0001\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000(\u0000\u0000\u0000 \u0000\u0000\u0000@\u0000\u0000\u0000\u0001\u0000 \u0000\u0000\u0000\u0000\u0000\u0010\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u000171612.3/?\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u000171_7171710-0-2.3/\u001f\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u000171;71717171710-0-0-0-3.4/\u000b\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u000171\u001d717171717171710-0-0-0-0-1.3/\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u000171\t7171717171717171710-0-0-0-0-0-0-1.3/_\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u000171717171717171717171710-0-0-0-0-0-0-0-0-2.3/;\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u000171Y7171717171717171717171710-0-0-0-0-0-0-0-0-0-0-2.3/\u001d\u0001\u0001\u0001\u0001\u0001\u0001717171XSwrvrvr<771717171710-0-0-0-0-0-wu~|~|NK0-0-2.\u0001\u0001\u0001\u0001\u0001\u0001717171UP{w71717171710-0-0-0-0-YWDB0-0-1.\u0001\u0001\u0001\u0001\u000171\u001b7171717171717171710-0-0-0-0-0-0-0-1.\u0001\u0001\u0001\u0001\u000171O71717171hcSN717171710-0-0-0-B?PM0-0-0-0-50\u0003\u0001\u0001\u0001\u000171}7171717171717171710-0-0-0-0-0-0-0-0-3/3\u0001\u0001\u0001\u0001717171717171~{][0-0-0-0-0-3/i\u0001\u0001\u0001\u0001717171717171;50-0-0-0-0-0-3/\u0001\u0001\u0001\u000171717171717171mk0-0-0-0-0-0-2.\u0001\u0001\u0001\u000171717171717171D>ieiedbdb1.0-0-0-0-0-0-2.\u0001\u0001\u0001\u0001717171717171717171710-0-|z0-0-0-0-0-0-0-2.\u0001\u0001\u0001\u00017171717171717171RLJD710-XU520-0-0-0-0-0-0-1.\u0001\u0001\u000171+717171717171717171710-0-0-0-0-0-0-0-0-0-50\u0005\u0001\u000171]717171717171717171ea:4QO:70-0-0-0-0-0-0-0-0-4/5\u0001\u00017171717171717171717171wr0-0-0-0-0-0-0-0-0-0-3/k\u0001\u00017171717171717171717171zvC@0-0-0-0-0-0-0-0-0-0-3/\u0001\u00017171717171717171717171:40-0-0-0-0-0-0-0-0-0-0-2.\u0001\u0001717171717171717171717171MK0-0-0-0-0-0-0-0-0-0-0-2.\u0001\u0001717171717171717171717171B<0-0-0-0-0-0-0-0-0-0-0-0-2.\u0001\u000171717171717171717171717171[Y0-0-0-0-0-0-0-0-0-0-0-0-1.\u0001\u000171717171717171717171717171OJ0-0-0-0-0-0-0-0-0-0-0-0-0-0-\u0001\u000171\u000571y717171717171717171717171jg0-0-0-0-0-0-0-0-0-0-0-2.3/4/\u0015\u0001\u0001\u0001\u0001\u000171\u001371717171717171717171PK1.0-0-0-0-0-0-0-0-2.3/3/\u001d\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u000171)71717171717171710-0-0-0-0-0-1.3/4/'\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u000171C71717171710-0-0-1.3.3/1\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u000171a71611.2.3/=\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000","projects/example-app/src/index.html":"<!doctype html>\r\n<html>\r\n<head>\r\n  <meta charset=\"utf-8\">\r\n  <title>Book Collection</title>\r\n  <base href=\"/\">\r\n\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\r\n  <link rel=\"icon\" type=\"image/x-icon\" href=\"favicon.ico\">\r\n  <link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" rel=\"stylesheet\">\r\n</head>\r\n<body>\r\n  <bc-app>Loading...</bc-app>\r\n</body>\r\n</html>\r\n","projects/example-app/src/main.ts":"import './polyfills.ts';\r\n\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\nimport { enableProdMode } from '@angular/core';\r\nimport { environment } from './environments/environment';\r\nimport { AppModule } from './app/app.module';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule);\r\n","projects/example-app/src/polyfills.ts":"// This file includes polyfills needed by Angular and is loaded before\r\n// the app. You can add your own extra polyfills to this file.\r\nimport 'core-js/es6/symbol';\r\nimport 'core-js/es6/object';\r\nimport 'core-js/es6/function';\r\nimport 'core-js/es6/parse-int';\r\nimport 'core-js/es6/parse-float';\r\nimport 'core-js/es6/number';\r\nimport 'core-js/es6/math';\r\nimport 'core-js/es6/string';\r\nimport 'core-js/es6/date';\r\nimport 'core-js/es6/array';\r\nimport 'core-js/es6/regexp';\r\nimport 'core-js/es6/map';\r\nimport 'core-js/es6/set';\r\nimport 'core-js/es6/reflect';\r\n\r\nimport 'core-js/es7/reflect';\r\nimport 'zone.js/dist/zone';\r\n\r\nimport 'hammerjs';\r\n","projects/example-app/src/setup-jest.ts":"import 'jest-preset-angular';\r\n(global as any)['CSS'] = null;\r\n\r\n/**\r\n * ISSUE: https://github.com/angular/material2/issues/7101\r\n * Workaround for JSDOM missing transform property\r\n */\r\nObject.defineProperty(document.body.style, 'transform', {\r\n  value: () => {\r\n    return {\r\n      enumerable: true,\r\n      configurable: true,\r\n    };\r\n  },\r\n});\r\n","projects/example-app/src/styles.css":"/* You can add global styles to this file, and also import other style files */\r\n@import \"~@angular/material/prebuilt-themes/deeppurple-amber.css\";\r\n\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n\r\nhtml {\r\n  -webkit-font-smoothing: antialiased;\r\n  -ms-overflow-style: none;\r\n  overflow: auto;\r\n}\r\n\r\n.mat-progress-spinner svg {\r\n  width: 30px !important;\r\n  height: 30px !important;\r\n}\r\n","projects/example-app/src/test.ts":"// This file is required by karma.conf.js and loads recursively all the .spec and framework files\r\n\r\nimport 'zone.js/dist/long-stack-trace-zone';\r\nimport 'zone.js/dist/proxy.js';\r\nimport 'zone.js/dist/sync-test';\r\nimport 'zone.js/dist/jasmine-patch';\r\nimport 'zone.js/dist/async-test';\r\nimport 'zone.js/dist/fake-async-test';\r\nimport { getTestBed } from '@angular/core/testing';\r\nimport {\r\n  BrowserDynamicTestingModule,\r\n  platformBrowserDynamicTesting,\r\n} from '@angular/platform-browser-dynamic/testing';\r\n\r\n// fixes typing errors in Atom editor\r\nimport 'jasmine';\r\n\r\n// Unfortunately there's no typing for the `__karma__` variable. Just declare it as any.\r\ndeclare var __karma__: any;\r\ndeclare var require: any;\r\n\r\n// Prevent Karma from running prematurely.\r\n__karma__.loaded = function() {};\r\n\r\n// First, initialize the Angular testing environment.\r\ngetTestBed().initTestEnvironment(\r\n  BrowserDynamicTestingModule,\r\n  platformBrowserDynamicTesting()\r\n);\r\n// Then we find all the tests.\r\nconst context = require.context('./', true, /\\.spec\\.ts$/);\r\n// And load the modules.\r\ncontext.keys().map(context);\r\n// Finally, start Karma to run the tests.\r\n__karma__.start();\r\n","projects/example-app/tsconfig.app.json":"{\r\n  \"compilerOptions\": {\r\n    \"strict\": true,\r\n    \"strictPropertyInitialization\": false,\r\n    \"sourceMap\": true,\r\n    \"declaration\": false,\r\n    \"moduleResolution\": \"node\",\r\n    \"emitDecoratorMetadata\": true,\r\n    \"experimentalDecorators\": true,\r\n    \"lib\": [\"es2017\", \"dom\"],\r\n    \"outDir\": \"../out-tsc/app\",\r\n    \"target\": \"es5\",\r\n    \"module\": \"es2015\",\r\n    \"types\": [],\r\n    \"baseUrl\": \".\",\r\n    \"paths\": {\r\n      \"@ngrx/effects\": [\"../../modules/effects\"],\r\n      \"@ngrx/store\": [\"../../modules/store\"],\r\n      \"@ngrx/store-devtools\": [\"../../modules/store-devtools\"],\r\n      \"@ngrx/router-store\": [\"../../modules/router-store\"],\r\n      \"@ngrx/entity\": [\"../../modules/entity\"],\r\n      \"@ngrx/schematics\": [\"../../modules/schematics\"],\r\n      \"@example-app/*\": [\"./src/app/*\"],\r\n      \"ngrx-store-freeze\": [\"../../projects/ngrx-store-freeze\"]\r\n    }\r\n  },\r\n  \"exclude\": [\r\n    \"../../node_modules\",\r\n    \"**/test.ts\",\r\n    \"**/*.spec.ts\",\r\n    \"**/setup-jest.ts\"\r\n  ]\r\n}\r\n","projects/example-app/tsconfig.spec.json":"{\r\n  \"compilerOptions\": {\r\n    \"sourceMap\": true,\r\n    \"declaration\": false,\r\n    \"moduleResolution\": \"node\",\r\n    \"emitDecoratorMetadata\": true,\r\n    \"experimentalDecorators\": true,\r\n    \"lib\": [\"es2017\", \"dom\"],\r\n    \"outDir\": \"../out-tsc/spec\",\r\n    \"module\": \"commonjs\",\r\n    \"target\": \"es6\",\r\n    \"types\": [\"jasmine\", \"node\"],\r\n    \"baseUrl\": \".\",\r\n    \"rootDir\": \"./\"\r\n  },\r\n  \"files\": [\"test.ts\", \"polyfills.ts\"],\r\n  \"include\": [\"**/*.spec.ts\"]\r\n}\r\n","projects/example-app/tslint.json":"{\r\n  \"rules\": {\r\n    \"class-name\": true,\r\n    \"no-duplicate-variable\": true,\r\n    \"no-eval\": false,\r\n    \"no-internal-module\": true,\r\n    \"no-var-keyword\": true,\r\n    \"triple-equals\": [false, \"allow-null-check\"],\r\n    \"variable-name\": [true, \"ban-keywords\", \"allow-leading-underscore\"]\r\n  }\r\n}\r\n"},
        title: 'NgRx Example App',
        description: 'NgRx example application with common patterns and best practices',
        template: 'angular-cli',
        tags: ['angular', 'ngrx', 'redux', 'example'],
        dependencies: {"@angular/animations":"^7.0.1","@angular/bazel":"^8.0.0-beta.10","@angular/cdk":"^7.0.1","@angular/cli":"^7.0.1","@angular/common":"^7.0.1","@angular/compiler":"^7.0.1","@angular/compiler-cli":"^7.0.1","@angular/core":"^7.0.1","@angular/forms":"^7.0.1","@angular/http":"^7.0.1","@angular/material":"^7.0.1","@angular/platform-browser":"^7.0.1","@angular/platform-browser-dynamic":"^7.0.1","@angular/platform-server":"^7.0.1","@angular/router":"^7.0.1","@applitools/eyes-cypress":"^3.4.12","@bazel/buildifier":"^0.22.0","@ngrx/db":"^2.2.0-beta.0","core-js":"^2.5.4","hammerjs":"^2.0.8","opencollective":"^1.0.3","rxjs":"^6.3.3","zone.js":"^0.8.26","@ngrx/effects":"7.4.0","@ngrx/entity":"7.4.0","@ngrx/router-store":"7.4.0","@ngrx/schematics":"7.4.0","@ngrx/store":"7.4.0","@ngrx/store-devtools":"7.4.0","ngrx-store-freeze":"0.2.4"}
      };

      StackBlitzSDK.openProject(project, { newWindow: false });
    </script>
    </body>
    </html>
  