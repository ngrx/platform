{"version":3,"file":"store-devtools.umd.js","sources":["../../../modules/store-devtools/src/instrument.ts","../../../modules/store-devtools/src/devtools.ts","../../../modules/store-devtools/src/reducer.ts","../../../modules/store-devtools/src/extension.ts","../../../modules/store-devtools/src/utils.ts","../../../modules/store-devtools/src/actions.ts","../../../modules/store-devtools/src/config.ts"],"sourcesContent":["import {\n  NgModule,\n  InjectionToken,\n  Injector,\n  ModuleWithProviders,\n} from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport {\n  StoreModule,\n  State,\n  StateObservable,\n  ActionsSubject,\n  ScannedActionsSubject,\n  ReducerObservable,\n  ReducerManagerDispatcher,\n  ActionReducerMap,\n  ActionReducerFactory,\n  INITIAL_STATE,\n  INITIAL_REDUCERS,\n  REDUCER_FACTORY,\n} from '@ngrx/store';\nimport { StoreDevtools, DevtoolsDispatcher } from './devtools';\nimport {\n  StoreDevtoolsConfig,\n  StoreDevtoolsOptions,\n  STORE_DEVTOOLS_CONFIG,\n  INITIAL_OPTIONS,\n} from './config';\nimport {\n  DevtoolsExtension,\n  REDUX_DEVTOOLS_EXTENSION,\n  ReduxDevtoolsExtension,\n} from './extension';\n\nexport const IS_EXTENSION_OR_MONITOR_PRESENT = new InjectionToken<boolean>(\n  'Is Devtools Extension or Monitor Present'\n);\n\nexport function createIsExtensionOrMonitorPresent(\n  extension: ReduxDevtoolsExtension | null,\n  config: StoreDevtoolsConfig\n) {\n  return Boolean(extension) || config.monitor !== noMonitor;\n}\n\nexport function createReduxDevtoolsExtension() {\n  const extensionKey = '__REDUX_DEVTOOLS_EXTENSION__';\n\n  if (\n    typeof window === 'object' &&\n    typeof (window as any)[extensionKey] !== 'undefined'\n  ) {\n    return (window as any)[extensionKey];\n  } else {\n    return null;\n  }\n}\n\nexport function createStateObservable(devtools: StoreDevtools) {\n  return devtools.state;\n}\n\nexport function noMonitor(): null {\n  return null;\n}\n\nexport function noActionSanitizer(): null {\n  return null;\n}\n\nexport function noStateSanitizer(): null {\n  return null;\n}\n\nexport const DEFAULT_NAME = 'NgRx Store DevTools';\n\nexport function createConfig(\n  _options: StoreDevtoolsOptions\n): StoreDevtoolsConfig {\n  const DEFAULT_OPTIONS: StoreDevtoolsConfig = {\n    maxAge: false,\n    monitor: noMonitor,\n    actionSanitizer: noActionSanitizer,\n    stateSanitizer: noStateSanitizer,\n    name: DEFAULT_NAME,\n    serialize: false,\n  };\n\n  let options = typeof _options === 'function' ? _options() : _options;\n  const config = Object.assign({}, DEFAULT_OPTIONS, options);\n\n  if (config.maxAge && config.maxAge < 2) {\n    throw new Error(\n      `Devtools 'maxAge' cannot be less than 2, got ${config.maxAge}`\n    );\n  }\n\n  return config;\n}\n\n@NgModule({})\nexport class StoreDevtoolsModule {\n  static instrument(options: StoreDevtoolsOptions = {}): ModuleWithProviders {\n    return {\n      ngModule: StoreDevtoolsModule,\n      providers: [\n        DevtoolsExtension,\n        DevtoolsDispatcher,\n        StoreDevtools,\n        {\n          provide: INITIAL_OPTIONS,\n          useValue: options,\n        },\n        {\n          provide: IS_EXTENSION_OR_MONITOR_PRESENT,\n          deps: [REDUX_DEVTOOLS_EXTENSION, STORE_DEVTOOLS_CONFIG],\n          useFactory: createIsExtensionOrMonitorPresent,\n        },\n        {\n          provide: REDUX_DEVTOOLS_EXTENSION,\n          useFactory: createReduxDevtoolsExtension,\n        },\n        {\n          provide: STORE_DEVTOOLS_CONFIG,\n          deps: [INITIAL_OPTIONS],\n          useFactory: createConfig,\n        },\n        {\n          provide: StateObservable,\n          deps: [StoreDevtools],\n          useFactory: createStateObservable,\n        },\n        {\n          provide: ReducerManagerDispatcher,\n          useExisting: DevtoolsDispatcher,\n        },\n      ],\n    };\n  }\n}\n","import { Injectable, Inject, OnDestroy } from '@angular/core';\nimport {\n  State,\n  Action,\n  INITIAL_STATE,\n  ReducerObservable,\n  ActionsSubject,\n  ScannedActionsSubject,\n} from '@ngrx/store';\nimport { Observable } from 'rxjs/Observable';\nimport { ReplaySubject } from 'rxjs/ReplaySubject';\nimport { Observer } from 'rxjs/Observer';\nimport { Subscription } from 'rxjs/Subscription';\nimport { map } from 'rxjs/operator/map';\nimport { merge } from 'rxjs/operator/merge';\nimport { observeOn } from 'rxjs/operator/observeOn';\nimport { scan } from 'rxjs/operator/scan';\nimport { skip } from 'rxjs/operator/skip';\nimport { withLatestFrom } from 'rxjs/operator/withLatestFrom';\nimport { queue } from 'rxjs/scheduler/queue';\n\nimport { DevtoolsExtension } from './extension';\nimport { liftAction, unliftAction, unliftState, applyOperators } from './utils';\nimport { liftReducerWith, liftInitialState, LiftedState } from './reducer';\nimport * as Actions from './actions';\nimport { StoreDevtoolsConfig, STORE_DEVTOOLS_CONFIG } from './config';\n\n@Injectable()\nexport class DevtoolsDispatcher extends ActionsSubject {}\n\n@Injectable()\nexport class StoreDevtools implements Observer<any> {\n  private stateSubscription: Subscription;\n  public dispatcher: ActionsSubject;\n  public liftedState: Observable<LiftedState>;\n  public state: Observable<any>;\n\n  constructor(\n    dispatcher: DevtoolsDispatcher,\n    actions$: ActionsSubject,\n    reducers$: ReducerObservable,\n    extension: DevtoolsExtension,\n    scannedActions: ScannedActionsSubject,\n    @Inject(INITIAL_STATE) initialState: any,\n    @Inject(STORE_DEVTOOLS_CONFIG) config: StoreDevtoolsConfig\n  ) {\n    const liftedInitialState = liftInitialState(initialState, config.monitor);\n    const liftReducer = liftReducerWith(\n      initialState,\n      liftedInitialState,\n      config.monitor,\n      config\n    );\n\n    const liftedAction$ = applyOperators(actions$.asObservable(), [\n      [skip, 1],\n      [merge, extension.actions$],\n      [map, liftAction],\n      [merge, dispatcher, extension.liftedActions$],\n      [observeOn, queue],\n    ]);\n\n    const liftedReducer$ = map.call(reducers$, liftReducer);\n\n    const liftedStateSubject = new ReplaySubject<LiftedState>(1);\n    const liftedStateSubscription = applyOperators(liftedAction$, [\n      [withLatestFrom, liftedReducer$],\n      [\n        scan,\n        ({ state: liftedState }: any, [action, reducer]: any) => {\n          const state = reducer(liftedState, action);\n\n          extension.notify(action, state);\n\n          return { state, action };\n        },\n        { state: liftedInitialState, action: null },\n      ],\n    ]).subscribe(({ state, action }) => {\n      liftedStateSubject.next(state);\n\n      if (action.type === Actions.PERFORM_ACTION) {\n        const unliftedAction = (action as Actions.PerformAction).action;\n\n        scannedActions.next(unliftedAction);\n      }\n    });\n\n    const liftedState$ = liftedStateSubject.asObservable() as Observable<\n      LiftedState\n    >;\n    const state$ = map.call(liftedState$, unliftState);\n\n    this.stateSubscription = liftedStateSubscription;\n    this.dispatcher = dispatcher;\n    this.liftedState = liftedState$;\n    this.state = state$;\n  }\n\n  dispatch(action: Action) {\n    this.dispatcher.next(action);\n  }\n\n  next(action: any) {\n    this.dispatcher.next(action);\n  }\n\n  error(error: any) {}\n\n  complete() {}\n\n  performAction(action: any) {\n    this.dispatch(new Actions.PerformAction(action));\n  }\n\n  reset() {\n    this.dispatch(new Actions.Reset());\n  }\n\n  rollback() {\n    this.dispatch(new Actions.Rollback());\n  }\n\n  commit() {\n    this.dispatch(new Actions.Commit());\n  }\n\n  sweep() {\n    this.dispatch(new Actions.Sweep());\n  }\n\n  toggleAction(id: number) {\n    this.dispatch(new Actions.ToggleAction(id));\n  }\n\n  jumpToState(index: number) {\n    this.dispatch(new Actions.JumpToState(index));\n  }\n\n  importState(nextLiftedState: any) {\n    this.dispatch(new Actions.ImportState(nextLiftedState));\n  }\n}\n","import {\n  Action,\n  ActionReducer,\n  ActionsSubject,\n  ReducerManager,\n  UPDATE,\n  INIT,\n} from '@ngrx/store';\nimport { difference, liftAction } from './utils';\nimport * as Actions from './actions';\nimport { StoreDevtoolsConfig } from './config';\n\nexport type InitAction = {\n  readonly type: typeof INIT;\n};\n\nexport type UpdateReducerAction = {\n  readonly type: typeof UPDATE;\n};\n\nexport type CoreActions = InitAction | UpdateReducerAction;\nexport type Actions = Actions.All | CoreActions;\n\nexport const INIT_ACTION = { type: INIT };\n\nexport interface LiftedState {\n  monitorState: any;\n  nextActionId: number;\n  actionsById: { [id: number]: { action: Action } };\n  stagedActionIds: number[];\n  skippedActionIds: number[];\n  committedState: any;\n  currentStateIndex: number;\n  computedStates: { state: any; error: any }[];\n}\n\n/**\n* Computes the next entry in the log by applying an action.\n*/\nfunction computeNextEntry(\n  reducer: ActionReducer<any, any>,\n  action: Action,\n  state: LiftedState,\n  error: any\n) {\n  if (error) {\n    return {\n      state,\n      error: 'Interrupted by an error up the chain',\n    };\n  }\n\n  let nextState = state;\n  let nextError;\n  try {\n    nextState = reducer(state, action);\n  } catch (err) {\n    nextError = err.toString();\n    console.error(err.stack || err);\n  }\n\n  return {\n    state: nextState,\n    error: nextError,\n  };\n}\n\n/**\n* Runs the reducer on invalidated actions to get a fresh computation log.\n*/\nfunction recomputeStates(\n  computedStates: { state: any; error: any }[],\n  minInvalidatedStateIndex: number,\n  reducer: ActionReducer<any, any>,\n  committedState: any,\n  actionsById: { [id: number]: { action: Action } },\n  stagedActionIds: number[],\n  skippedActionIds: number[]\n) {\n  // Optimization: exit early and return the same reference\n  // if we know nothing could have changed.\n  if (\n    minInvalidatedStateIndex >= computedStates.length &&\n    computedStates.length === stagedActionIds.length\n  ) {\n    return computedStates;\n  }\n\n  const nextComputedStates = computedStates.slice(0, minInvalidatedStateIndex);\n  for (let i = minInvalidatedStateIndex; i < stagedActionIds.length; i++) {\n    const actionId = stagedActionIds[i];\n    const action = actionsById[actionId].action;\n\n    const previousEntry = nextComputedStates[i - 1];\n    const previousState = previousEntry ? previousEntry.state : committedState;\n    const previousError = previousEntry ? previousEntry.error : undefined;\n\n    const shouldSkip = skippedActionIds.indexOf(actionId) > -1;\n    const entry = shouldSkip\n      ? previousEntry\n      : computeNextEntry(reducer, action, previousState, previousError);\n\n    nextComputedStates.push(entry);\n  }\n\n  return nextComputedStates;\n}\n\nexport function liftInitialState(\n  initialCommittedState?: any,\n  monitorReducer?: any\n): LiftedState {\n  return {\n    monitorState: monitorReducer(undefined, {}),\n    nextActionId: 1,\n    actionsById: { 0: liftAction(INIT_ACTION) },\n    stagedActionIds: [0],\n    skippedActionIds: [],\n    committedState: initialCommittedState,\n    currentStateIndex: 0,\n    computedStates: [],\n  };\n}\n\n/**\n* Creates a history state reducer from an app's reducer.\n*/\nexport function liftReducerWith(\n  initialCommittedState: any,\n  initialLiftedState: LiftedState,\n  monitorReducer?: any,\n  options: Partial<StoreDevtoolsConfig> = {}\n) {\n  /**\n  * Manages how the history actions modify the history state.\n  */\n  return (\n    reducer: ActionReducer<any, any>\n  ): ActionReducer<LiftedState, Actions> => (liftedState, liftedAction) => {\n    let {\n      monitorState,\n      actionsById,\n      nextActionId,\n      stagedActionIds,\n      skippedActionIds,\n      committedState,\n      currentStateIndex,\n      computedStates,\n    } =\n      liftedState || initialLiftedState;\n\n    if (!liftedState) {\n      // Prevent mutating initialLiftedState\n      actionsById = Object.create(actionsById);\n    }\n\n    function commitExcessActions(n: number) {\n      // Auto-commits n-number of excess actions.\n      let excess = n;\n      let idsToDelete = stagedActionIds.slice(1, excess + 1);\n\n      for (let i = 0; i < idsToDelete.length; i++) {\n        if (computedStates[i + 1].error) {\n          // Stop if error is found. Commit actions up to error.\n          excess = i;\n          idsToDelete = stagedActionIds.slice(1, excess + 1);\n          break;\n        } else {\n          delete actionsById[idsToDelete[i]];\n        }\n      }\n\n      skippedActionIds = skippedActionIds.filter(\n        id => idsToDelete.indexOf(id) === -1\n      );\n      stagedActionIds = [0, ...stagedActionIds.slice(excess + 1)];\n      committedState = computedStates[excess].state;\n      computedStates = computedStates.slice(excess);\n      currentStateIndex =\n        currentStateIndex > excess ? currentStateIndex - excess : 0;\n    }\n\n    // By default, agressively recompute every state whatever happens.\n    // This has O(n) performance, so we'll override this to a sensible\n    // value whenever we feel like we don't have to recompute the states.\n    let minInvalidatedStateIndex = 0;\n\n    switch (liftedAction.type) {\n      case Actions.RESET: {\n        // Get back to the state the store was created with.\n        actionsById = { 0: liftAction(INIT_ACTION) };\n        nextActionId = 1;\n        stagedActionIds = [0];\n        skippedActionIds = [];\n        committedState = initialCommittedState;\n        currentStateIndex = 0;\n        computedStates = [];\n        break;\n      }\n      case Actions.COMMIT: {\n        // Consider the last committed state the new starting point.\n        // Squash any staged actions into a single committed state.\n        actionsById = { 0: liftAction(INIT_ACTION) };\n        nextActionId = 1;\n        stagedActionIds = [0];\n        skippedActionIds = [];\n        committedState = computedStates[currentStateIndex].state;\n        currentStateIndex = 0;\n        computedStates = [];\n        break;\n      }\n      case Actions.ROLLBACK: {\n        // Forget about any staged actions.\n        // Start again from the last committed state.\n        actionsById = { 0: liftAction(INIT_ACTION) };\n        nextActionId = 1;\n        stagedActionIds = [0];\n        skippedActionIds = [];\n        currentStateIndex = 0;\n        computedStates = [];\n        break;\n      }\n      case Actions.TOGGLE_ACTION: {\n        // Toggle whether an action with given ID is skipped.\n        // Being skipped means it is a no-op during the computation.\n        const { id: actionId } = liftedAction;\n        const index = skippedActionIds.indexOf(actionId);\n        if (index === -1) {\n          skippedActionIds = [actionId, ...skippedActionIds];\n        } else {\n          skippedActionIds = skippedActionIds.filter(id => id !== actionId);\n        }\n        // Optimization: we know history before this action hasn't changed\n        minInvalidatedStateIndex = stagedActionIds.indexOf(actionId);\n        break;\n      }\n      case Actions.SET_ACTIONS_ACTIVE: {\n        // Toggle whether an action with given ID is skipped.\n        // Being skipped means it is a no-op during the computation.\n        const { start, end, active } = liftedAction;\n        const actionIds = [];\n        for (let i = start; i < end; i++) actionIds.push(i);\n        if (active) {\n          skippedActionIds = difference(skippedActionIds, actionIds);\n        } else {\n          skippedActionIds = [...skippedActionIds, ...actionIds];\n        }\n\n        // Optimization: we know history before this action hasn't changed\n        minInvalidatedStateIndex = stagedActionIds.indexOf(start);\n        break;\n      }\n      case Actions.JUMP_TO_STATE: {\n        // Without recomputing anything, move the pointer that tell us\n        // which state is considered the current one. Useful for sliders.\n        currentStateIndex = liftedAction.index;\n        // Optimization: we know the history has not changed.\n        minInvalidatedStateIndex = Infinity;\n        break;\n      }\n      case Actions.SWEEP: {\n        // Forget any actions that are currently being skipped.\n        stagedActionIds = difference(stagedActionIds, skippedActionIds);\n        skippedActionIds = [];\n        currentStateIndex = Math.min(\n          currentStateIndex,\n          stagedActionIds.length - 1\n        );\n        break;\n      }\n      case Actions.PERFORM_ACTION: {\n        // Auto-commit as new actions come in.\n        if (options.maxAge && stagedActionIds.length === options.maxAge) {\n          commitExcessActions(1);\n        }\n\n        if (currentStateIndex === stagedActionIds.length - 1) {\n          currentStateIndex++;\n        }\n        const actionId = nextActionId++;\n        // Mutation! This is the hottest path, and we optimize on purpose.\n        // It is safe because we set a new key in a cache dictionary.\n        actionsById[actionId] = liftedAction;\n        stagedActionIds = [...stagedActionIds, actionId];\n        // Optimization: we know that only the new action needs computing.\n        minInvalidatedStateIndex = stagedActionIds.length - 1;\n        break;\n      }\n      case Actions.IMPORT_STATE: {\n        // Completely replace everything.\n        ({\n          monitorState,\n          actionsById,\n          nextActionId,\n          stagedActionIds,\n          skippedActionIds,\n          committedState,\n          currentStateIndex,\n          computedStates,\n        } = liftedAction.nextLiftedState);\n        break;\n      }\n      case UPDATE:\n      case INIT: {\n        // Always recompute states on hot reload and init.\n        minInvalidatedStateIndex = 0;\n\n        if (options.maxAge && stagedActionIds.length > options.maxAge) {\n          // States must be recomputed before committing excess.\n          computedStates = recomputeStates(\n            computedStates,\n            minInvalidatedStateIndex,\n            reducer,\n            committedState,\n            actionsById,\n            stagedActionIds,\n            skippedActionIds\n          );\n\n          commitExcessActions(stagedActionIds.length - options.maxAge);\n\n          // Avoid double computation.\n          minInvalidatedStateIndex = Infinity;\n        }\n\n        break;\n      }\n      default: {\n        // If the action is not recognized, it's a monitor action.\n        // Optimization: a monitor action can't change history.\n        minInvalidatedStateIndex = Infinity;\n        break;\n      }\n    }\n\n    computedStates = recomputeStates(\n      computedStates,\n      minInvalidatedStateIndex,\n      reducer,\n      committedState,\n      actionsById,\n      stagedActionIds,\n      skippedActionIds\n    );\n    monitorState = monitorReducer(monitorState, liftedAction);\n\n    return {\n      monitorState,\n      actionsById,\n      nextActionId,\n      stagedActionIds,\n      skippedActionIds,\n      committedState,\n      currentStateIndex,\n      computedStates,\n    };\n  };\n}\n","import { Inject, Injectable, InjectionToken } from '@angular/core';\nimport { Action } from '@ngrx/store';\nimport { Observable } from 'rxjs/Observable';\nimport { empty } from 'rxjs/observable/empty';\nimport { filter } from 'rxjs/operator/filter';\nimport { map } from 'rxjs/operator/map';\nimport { share } from 'rxjs/operator/share';\nimport { switchMap } from 'rxjs/operator/switchMap';\nimport { takeUntil } from 'rxjs/operator/takeUntil';\n\nimport { STORE_DEVTOOLS_CONFIG, StoreDevtoolsConfig } from './config';\nimport { LiftedState } from './reducer';\nimport { applyOperators } from './utils';\n\nexport const ExtensionActionTypes = {\n  START: 'START',\n  DISPATCH: 'DISPATCH',\n  STOP: 'STOP',\n  ACTION: 'ACTION',\n};\n\nexport const REDUX_DEVTOOLS_EXTENSION = new InjectionToken<\n  ReduxDevtoolsExtension\n>('Redux Devtools Extension');\n\nexport interface ReduxDevtoolsExtensionConnection {\n  subscribe(listener: (change: any) => void): void;\n  unsubscribe(): void;\n  send(action: any, state: any): void;\n}\n\nexport interface ReduxDevtoolsExtension {\n  connect(options: {\n    shouldStringify?: boolean;\n    instanceId: string;\n  }): ReduxDevtoolsExtensionConnection;\n  send(\n    action: any,\n    state: any,\n    options: StoreDevtoolsConfig,\n    instanceId?: string\n  ): void;\n}\n\n@Injectable()\nexport class DevtoolsExtension {\n  private instanceId = `ngrx-store-${Date.now()}`;\n  private devtoolsExtension: ReduxDevtoolsExtension;\n\n  liftedActions$: Observable<any>;\n  actions$: Observable<any>;\n\n  constructor(\n    @Inject(REDUX_DEVTOOLS_EXTENSION) devtoolsExtension: ReduxDevtoolsExtension,\n    @Inject(STORE_DEVTOOLS_CONFIG) private config: StoreDevtoolsConfig\n  ) {\n    this.devtoolsExtension = devtoolsExtension;\n    this.createActionStreams();\n  }\n\n  notify(action: Action, state: LiftedState) {\n    if (!this.devtoolsExtension) {\n      return;\n    }\n\n    this.devtoolsExtension.send(null, state, this.config, this.instanceId);\n  }\n\n  private createChangesObservable(): Observable<any> {\n    if (!this.devtoolsExtension) {\n      return empty();\n    }\n\n    return new Observable(subscriber => {\n      const connection = this.devtoolsExtension.connect({\n        instanceId: this.instanceId,\n      });\n\n      connection.subscribe((change: any) => subscriber.next(change));\n\n      return connection.unsubscribe;\n    });\n  }\n\n  private createActionStreams() {\n    // Listens to all changes based on our instanceId\n    const changes$ = share.call(this.createChangesObservable());\n\n    // Listen for the start action\n    const start$ = filter.call(\n      changes$,\n      (change: any) => change.type === ExtensionActionTypes.START\n    );\n\n    // Listen for the stop action\n    const stop$ = filter.call(\n      changes$,\n      (change: any) => change.type === ExtensionActionTypes.STOP\n    );\n\n    // Listen for lifted actions\n    const liftedActions$ = applyOperators(changes$, [\n      [filter, (change: any) => change.type === ExtensionActionTypes.DISPATCH],\n      [map, (change: any) => this.unwrapAction(change.payload)],\n    ]);\n\n    // Listen for unlifted actions\n    const actions$ = applyOperators(changes$, [\n      [filter, (change: any) => change.type === ExtensionActionTypes.ACTION],\n      [map, (change: any) => this.unwrapAction(change.payload)],\n    ]);\n\n    const actionsUntilStop$ = takeUntil.call(actions$, stop$);\n    const liftedUntilStop$ = takeUntil.call(liftedActions$, stop$);\n\n    // Only take the action sources between the start/stop events\n    this.actions$ = switchMap.call(start$, () => actionsUntilStop$);\n    this.liftedActions$ = switchMap.call(start$, () => liftedUntilStop$);\n  }\n\n  private unwrapAction(action: Action) {\n    return typeof action === 'string' ? eval(`(${action})`) : action;\n  }\n}\n","import { Action } from '@ngrx/store';\nimport { Observable } from 'rxjs/Observable';\nimport { LiftedState } from './reducer';\nimport * as Actions from './actions';\n\nexport function difference(first: any[], second: any[]) {\n  return first.filter(item => second.indexOf(item) < 0);\n}\n\n/**\n * Provides an app's view into the state of the lifted store.\n */\nexport function unliftState(liftedState: LiftedState) {\n  const { computedStates, currentStateIndex } = liftedState;\n  const { state } = computedStates[currentStateIndex];\n\n  return state;\n}\n\nexport function unliftAction(liftedState: LiftedState) {\n  return liftedState.actionsById[liftedState.nextActionId - 1];\n}\n\n/**\n* Lifts an app's action into an action on the lifted store.\n*/\nexport function liftAction(action: Action) {\n  return new Actions.PerformAction(action);\n}\n\nexport function applyOperators(\n  input$: Observable<any>,\n  operators: any[][]\n): Observable<any> {\n  return operators.reduce((source$, [operator, ...args]) => {\n    return operator.apply(source$, args);\n  }, input$);\n}\n","import { Action } from '@ngrx/store';\n\nexport const PERFORM_ACTION = 'PERFORM_ACTION';\nexport const RESET = 'RESET';\nexport const ROLLBACK = 'ROLLBACK';\nexport const COMMIT = 'COMMIT';\nexport const SWEEP = 'SWEEP';\nexport const TOGGLE_ACTION = 'TOGGLE_ACTION';\nexport const SET_ACTIONS_ACTIVE = 'SET_ACTIONS_ACTIVE';\nexport const JUMP_TO_STATE = 'JUMP_TO_STATE';\nexport const IMPORT_STATE = 'IMPORT_STATE';\n\nexport class PerformAction implements Action {\n  readonly type = PERFORM_ACTION;\n\n  constructor(public action: Action, public timestamp?: number) {\n    if (typeof action.type === 'undefined') {\n      throw new Error(\n        'Actions may not have an undefined \"type\" property. ' +\n          'Have you misspelled a constant?'\n      );\n    }\n  }\n}\n\nexport class Reset implements Action {\n  readonly type = RESET;\n\n  constructor(public timestamp?: number) {}\n}\n\nexport class Rollback implements Action {\n  readonly type = ROLLBACK;\n\n  constructor(public timestamp?: number) {}\n}\n\nexport class Commit implements Action {\n  readonly type = COMMIT;\n\n  constructor(public timestamp?: number) {}\n}\n\nexport class Sweep implements Action {\n  readonly type = SWEEP;\n}\n\nexport class ToggleAction implements Action {\n  readonly type = TOGGLE_ACTION;\n\n  constructor(public id: number) {}\n}\n\nexport class SetActionsActive implements Action {\n  readonly type = SET_ACTIONS_ACTIVE;\n\n  constructor(\n    public start: number,\n    public end: number,\n    public active: boolean = true\n  ) {}\n}\n\nexport class JumpToState implements Action {\n  readonly type = JUMP_TO_STATE;\n\n  constructor(public index: number) {}\n}\n\nexport class ImportState implements Action {\n  readonly type = IMPORT_STATE;\n\n  constructor(public nextLiftedState: any) {}\n}\n\nexport type All =\n  | PerformAction\n  | Reset\n  | Rollback\n  | Commit\n  | Sweep\n  | ToggleAction\n  | SetActionsActive\n  | JumpToState\n  | ImportState;\n","import { ActionReducer, Action } from '@ngrx/store';\nimport { InjectionToken, Type } from '@angular/core';\n\nexport class StoreDevtoolsConfig {\n  maxAge: number | false;\n  monitor: ActionReducer<any, any>;\n  actionSanitizer?: <A extends Action>(action: A, id: number) => A;\n  stateSanitizer?: <S>(state: S, index: number) => S;\n  name?: string;\n  serialize?: boolean;\n}\n\nexport const STORE_DEVTOOLS_CONFIG = new InjectionToken<StoreDevtoolsConfig>(\n  '@ngrx/devtools Options'\n);\nexport const INITIAL_OPTIONS = new InjectionToken<StoreDevtoolsConfig>(\n  '@ngrx/devtools Initial Config'\n);\n\nexport type StoreDevtoolsOptions =\n  | Partial<StoreDevtoolsConfig>\n  | (() => Partial<StoreDevtoolsConfig>);\n"],"names":["NgModule","ReducerManagerDispatcher","StateObservable","InjectionToken","Inject","INITIAL_STATE","ScannedActionsSubject","ReducerObservable","ActionsSubject","Injectable","Actions.ImportState","Actions.JumpToState","Actions.ToggleAction","Actions.Sweep","Actions.Commit","Actions.Rollback","Actions.Reset","Actions.PerformAction","map","Actions.PERFORM_ACTION","scan","withLatestFrom","ReplaySubject","observeOn","queue","merge","skip","INIT","UPDATE","Actions.IMPORT_STATE","Actions.SWEEP","Actions.JUMP_TO_STATE","Actions.SET_ACTIONS_ACTIVE","Actions.TOGGLE_ACTION","Actions.ROLLBACK","Actions.COMMIT","Actions.RESET","switchMap","takeUntil","filter","share","Observable","empty"],"mappings":";;;;;;;;;;;;;;;;;;;;AMCA,IAAA,mBAAA,IAAA,YAAA;IAAA,SAAA,mBAAA,GAAA;KASC;IAAD,OAAA,mBAAC,CAAD;CAAC,EAAD,CAAA,CAAC;AAEM,IAAM,qBAAqB,GAAG,IAAIG,mBAAc,CACrD,wBAAwB,CACzB,CAAC;AACF,IAAa,eAAe,GAAG,IAAIA,mBAAc,CAC/C,+BAA+B,CAChC,CAFD;;;;;ADbA,IAAa,cAAc,GAAG,gBAAgB,CAAC;AAC/C,IAAa,KAAK,GAAG,OAAO,CAAC;AAC7B,IAAa,QAAQ,GAAG,UAAU,CAAC;AACnC,IAAa,MAAM,GAAG,QAAQ,CAAC;AAC/B,IAAa,KAAK,GAAG,OAAO,CAAC;AAC7B,IAAa,aAAa,GAAG,eAAe,CAAC;AAC7C,IAAa,kBAAkB,GAAG,oBAAoB,CAAC;AACvD,IAAa,aAAa,GAAG,eAAe,CAAC;AAC7C,IAAa,YAAY,GAAG,cAAc,CAAC;AAE3C,IAAA,aAAA,IAAA,YAAA;;;;;IAGE,SAAF,aAAA,CAAqB,MAAc,EAAS,SAAkB,EAA9D;QAAqB,IAArB,CAAA,MAA2B,GAAN,MAAM,CAAQ;QAAS,IAA5C,CAAA,SAAqD,GAAT,SAAS,CAAS;QAF9D,IAAA,CAAA,IAAA,GAAkB,cAAc,CAAhC;QAGI,IAAI,OAAO,MAAM,CAAC,IAAI,KAAK,WAAW,EAAE;YACtC,MAAM,IAAI,KAAK,CACb,qDAAqD;gBACnD,iCAAiC,CACpC,CAAC;SACH;KACF;IACH,OAAA,aAAC,CAAD;CAAC,EAAD,CAAA,CAAC;AAED,IAAA,KAAA,IAAA,YAAA;;;;IAGE,SAAF,KAAA,CAAqB,SAAkB,EAAvC;QAAqB,IAArB,CAAA,SAA8B,GAAT,SAAS,CAAS;QAFvC,IAAA,CAAA,IAAA,GAAkB,KAAK,CAAvB;KAE2C;IAC3C,OAAA,KAAC,CAAD;CAAC,EAAD,CAAA,CAAC;AAED,IAAA,QAAA,IAAA,YAAA;;;;IAGE,SAAF,QAAA,CAAqB,SAAkB,EAAvC;QAAqB,IAArB,CAAA,SAA8B,GAAT,SAAS,CAAS;QAFvC,IAAA,CAAA,IAAA,GAAkB,QAAQ,CAA1B;KAE2C;IAC3C,OAAA,QAAC,CAAD;CAAC,EAAD,CAAA,CAAC;AAED,IAAA,MAAA,IAAA,YAAA;;;;IAGE,SAAF,MAAA,CAAqB,SAAkB,EAAvC;QAAqB,IAArB,CAAA,SAA8B,GAAT,SAAS,CAAS;QAFvC,IAAA,CAAA,IAAA,GAAkB,MAAM,CAAxB;KAE2C;IAC3C,OAAA,MAAC,CAAD;CAAC,EAAD,CAAA,CAAC;AAED,IAAA,KAAA,IAAA,YAAA;;QACA,IAAA,CAAA,IAAA,GAAkB,KAAK,CAAvB;;IACA,OAAA,KAAC,CAAD;CAAC,EAAD,CAAA,CAAC;AAED,IAAA,YAAA,IAAA,YAAA;;;;IAGE,SAAF,YAAA,CAAqB,EAAU,EAA/B;QAAqB,IAArB,CAAA,EAAuB,GAAF,EAAE,CAAQ;QAF/B,IAAA,CAAA,IAAA,GAAkB,aAAa,CAA/B;KAEmC;IACnC,OAAA,YAAC,CAAD;CAAC,EAAD,CAAA,CAAC;AAYD,IAAA,WAAA,IAAA,YAAA;;;;IAGE,SAAF,WAAA,CAAqB,KAAa,EAAlC;QAAqB,IAArB,CAAA,KAA0B,GAAL,KAAK,CAAQ;QAFlC,IAAA,CAAA,IAAA,GAAkB,aAAa,CAA/B;KAEsC;IACtC,OAAA,WAAC,CAAD;CAAC,EAAD,CAAA,CAAC;AAED,IAAA,WAAA,IAAA,YAAA;;;;IAGE,SAAF,WAAA,CAAqB,eAAoB,EAAzC;QAAqB,IAArB,CAAA,eAAoC,GAAf,eAAe,CAAK;QAFzC,IAAA,CAAA,IAAA,GAAkB,YAAY,CAA9B;KAE6C;IAC7C,OAAA,WAAC,CAAD;CAAC,EAAD,CAAA,CAAC;;;;;;;;;;ADpED,SAAA,UAAA,CAA2B,KAAY,EAAE,MAAa,EAAtD;IACE,OAAO,KAAK,CAAC,MAAM,CAAC,UAAA,IAAI,EAA1B,EAA8B,OAAA,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAtD,EAAsD,CAAC,CAAC;CACvD;;;;;;AAKD,SAAA,WAAA,CAA4B,WAAwB,EAApD;IACU,IAAA,cAAV,GAAA,WAAA,CAAA,cAAwB,EAAE,iBAA1B,GAAA,WAAA,CAAA,iBAA2C,CAAiB;IAClD,IAAA,KAAV,GAAA,cAAA,CAAA,iBAAA,CAAA,CAAA,KAAe,CAAuC;IAEpD,OAAO,KAAK,CAAC;CACd;;;;;;;;;;AASD,SAAA,UAAA,CAA2B,MAAc,EAAzC;IACE,OAAO,IAAIc,aAAqB,CAAC,MAAM,CAAC,CAAC;CAC1C;;;;;;AAED,SAAA,cAAA,CACE,MAAuB,EACvB,SAAkB,EAFpB;IAIE,OAAO,SAAS,CAAC,MAAM,CAAC,UAAC,OAAO,EAAE,EAAmB,EAAvD;QAAA,IAAqC,QAArC,GAAA,EAAA,CAAA,CAAA,CAA6C,EAAE,IAA/C,GAAA,EAAA,CAAA,KAAA,CAAA,CAAA,CAAsD,CAAtD;QACI,OAAO,QAAQ,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;KACtC,EAAE,MAAM,CAAC,CAAC;CACZ;;;;;ADrCD,IAca,oBAAoB,GAAG;IAClC,KAAK,EAAE,OAAO;IACd,QAAQ,EAAE,UAAU;IACpB,IAAI,EAAE,MAAM;IACZ,MAAM,EAAE,QAAQ;CACjB,CAAC;AAEF,IAAa,wBAAwB,GAAG,IAAId,mBAAc,CAExD,0BAA0B,CAAC,CAAC;;;;;;;AAsB9B,IAAA,iBAAA,IAAA,YAAA;;;;;IAOE,SAAF,iBAAA,CACsC,iBADtC,EAE2C,MAF3C,EAAA;QAE2C,IAA3C,CAAA,MAAiD,GAAN,MAAM,CAAjD;QARA,IAAA,CAAA,UAAA,GAAuB,aAAvB,GAAqC,IAAI,CAAC,GAAG,EAAI,CAAjD;QAUI,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;QAC3C,IAAI,CAAC,mBAAmB,EAAE,CAAC;KAC5B;;;;;;IAED,iBAAF,CAAA,SAAA,CAAA,MAAQ,GAAN,UAAO,MAAc,EAAE,KAAkB,EAA3C;QACI,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;YAC3B,OAAO;SACR;QAED,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;KACxE,CAAH;;;;IAEU,iBAAV,CAAA,SAAA,CAAA,uBAAiC,GAAvB,YAAV;QAAU,IAAV,KAAA,GAAA,IAAA,CAAA;QACI,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;YAC3B,OAAOuC,WAAK,EAAE,CAAC;SAChB;QAED,OAAO,IAAID,qBAAU,CAAC,UAAA,UAAU,EAApC;YACM,qBAAM,UAAU,GAAG,KAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC;gBAChD,UAAU,EAAE,KAAI,CAAC,UAAU;aAC5B,CAAC,CAAC;YAEH,UAAU,CAAC,SAAS,CAAC,UAAC,MAAW,EAAvC,EAA4C,OAAA,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAnE,EAAmE,CAAC,CAAC;YAE/D,OAAO,UAAU,CAAC,WAAW,CAAC;SAC/B,CAAC,CAAC;;;;;IAGG,iBAAV,CAAA,SAAA,CAAA,mBAA6B,GAAnB,YAAV;QAAU,IAAV,KAAA,GAAA,IAAA,CAAA;;QAEI,qBAAM,QAAQ,GAAGD,WAAK,CAAC,IAAI,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC,CAAC;;QAG5D,qBAAM,MAAM,GAAGD,aAAM,CAAC,IAAI,CACxB,QAAQ,EACR,UAAC,MAAW,EAFlB,EAEuB,OAAA,MAAM,CAAC,IAAI,KAAK,oBAAoB,CAAC,KAAK,CAFjE,EAEiE,CAC5D,CAAC;;QAGF,qBAAM,KAAK,GAAGA,aAAM,CAAC,IAAI,CACvB,QAAQ,EACR,UAAC,MAAW,EAFlB,EAEuB,OAAA,MAAM,CAAC,IAAI,KAAK,oBAAoB,CAAC,IAAI,CAFhE,EAEgE,CAC3D,CAAC;;QAGF,qBAAM,cAAc,GAAG,cAAc,CAAC,QAAQ,EAAE;YAC9C,CAACA,aAAM,EAAE,UAAC,MAAW,EAA3B,EAAgC,OAAA,MAAM,CAAC,IAAI,KAAK,oBAAoB,CAAC,QAAQ,CAA7E,EAA6E,CAAC;YACxE,CAACrB,OAAG,EAAE,UAAC,MAAW,EAAxB,EAA6B,OAAA,KAAI,CAAC,YAAY,CAAC,MAAM,CAAC,OAAO,CAAC,CAA9D,EAA8D,CAAC;SAC1D,CAAC,CAAC;;QAGH,qBAAM,QAAQ,GAAG,cAAc,CAAC,QAAQ,EAAE;YACxC,CAACqB,aAAM,EAAE,UAAC,MAAW,EAA3B,EAAgC,OAAA,MAAM,CAAC,IAAI,KAAK,oBAAoB,CAAC,MAAM,CAA3E,EAA2E,CAAC;YACtE,CAACrB,OAAG,EAAE,UAAC,MAAW,EAAxB,EAA6B,OAAA,KAAI,CAAC,YAAY,CAAC,MAAM,CAAC,OAAO,CAAC,CAA9D,EAA8D,CAAC;SAC1D,CAAC,CAAC;QAEH,qBAAM,iBAAiB,GAAGoB,mBAAS,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QAC1D,qBAAM,gBAAgB,GAAGA,mBAAS,CAAC,IAAI,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;;QAG/D,IAAI,CAAC,QAAQ,GAAGD,mBAAS,CAAC,IAAI,CAAC,MAAM,EAAE,YAA3C,EAAiD,OAAA,iBAAiB,CAAlE,EAAkE,CAAC,CAAC;QAChE,IAAI,CAAC,cAAc,GAAGA,mBAAS,CAAC,IAAI,CAAC,MAAM,EAAE,YAAjD,EAAuD,OAAA,gBAAgB,CAAvE,EAAuE,CAAC,CAAC;;;;;;IAG/D,iBAAV,CAAA,SAAA,CAAA,YAAsB,GAAZ,UAAa,MAAc,EAArC;QACI,OAAO,OAAO,MAAM,KAAK,QAAQ,GAAG,IAAI,CAAC,GAA7C,GAAiD,MAAM,GAAvD,GAA0D,CAAC,GAAG,MAAM,CAAC;;;CA5ErE,EAAA,CAAA,CAAA;;IADA,EAAA,IAAA,EAAC5B,eAAU,EAAX;;;;IASA,EAAA,IAAA,EAAA,SAAA,EAAA,UAAA,EAAA,CAAA,EAAA,IAAA,EAAKL,WAAM,EAAX,IAAA,EAAA,CAAY,wBAAwB,EAApC,EAAA,EAAA,EAAA;IA3CA,EAAA,IAAA,EAAgC,mBAAmB,EAAnD,UAAA,EAAA,CAAA,EAAA,IAAA,EA4CKA,WAAM,EA5CX,IAAA,EAAA,CA4CY,qBAAqB,EA5CjC,EAAA,EAAA,EAAA;;;;;;ADVA,IAuBa,WAAW,GAAG,EAAE,IAAI,EAAEuB,UAAI,EAAE,CAAC;;;;;;;;;;;;AAgB1C,SAAA,gBAAA,CACE,OAAgC,EAChC,MAAc,EACd,KAAkB,EAClB,KAAU,EAJZ;IAME,IAAI,KAAK,EAAE;QACT,OAAO;YACL,KAAK,EAAX,KAAW;YACL,KAAK,EAAE,sCAAsC;SAC9C,CAAC;KACH;IAED,qBAAI,SAAS,GAAG,KAAK,CAAC;IACtB,qBAAI,SAAS,CAAC;IACd,IAAI;QACF,SAAS,GAAG,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;KACpC;IAAC,OAAO,GAAG,EAAE;QACZ,SAAS,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC;QAC3B,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,CAAC;KACjC;IAED,OAAO;QACL,KAAK,EAAE,SAAS;QAChB,KAAK,EAAE,SAAS;KACjB,CAAC;CACH;;;;;;;;;;;;AAKD,SAAA,eAAA,CACE,cAA4C,EAC5C,wBAAgC,EAChC,OAAgC,EAChC,cAAmB,EACnB,WAAiD,EACjD,eAAyB,EACzB,gBAA0B,EAP5B;;;IAWE,IACE,wBAAwB,IAAI,cAAc,CAAC,MAAM;QACjD,cAAc,CAAC,MAAM,KAAK,eAAe,CAAC,MAC5C,EAAE;QACA,OAAO,cAAc,CAAC;KACvB;IAED,qBAAM,kBAAkB,GAAG,cAAc,CAAC,KAAK,CAAC,CAAC,EAAE,wBAAwB,CAAC,CAAC;IAC7E,KAAK,qBAAI,CAAC,GAAG,wBAAwB,EAAE,CAAC,GAAG,eAAe,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACtE,qBAAM,QAAQ,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;QACpC,qBAAM,MAAM,GAAG,WAAW,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC;QAE5C,qBAAM,aAAa,GAAG,kBAAkB,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAChD,qBAAM,aAAa,GAAG,aAAa,GAAG,aAAa,CAAC,KAAK,GAAG,cAAc,CAAC;QAC3E,qBAAM,aAAa,GAAG,aAAa,GAAG,aAAa,CAAC,KAAK,GAAG,SAAS,CAAC;QAEtE,qBAAM,UAAU,GAAG,gBAAgB,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;QAC3D,qBAAM,KAAK,GAAG,UAAU;cACpB,aAAa;cACb,gBAAgB,CAAC,OAAO,EAAE,MAAM,EAAE,aAAa,EAAE,aAAa,CAAC,CAAC;QAEpE,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KAChC;IAED,OAAO,kBAAkB,CAAC;CAC3B;;;;;;AAED,SAAA,gBAAA,CACE,qBAA2B,EAC3B,cAAoB,EAFtB;IAIE,OAAO;QACL,YAAY,EAAE,cAAc,CAAC,SAAS,EAAE,EAAE,CAAC;QAC3C,YAAY,EAAE,CAAC;QACf,WAAW,EAAE,EAAE,CAAC,EAAE,UAAU,CAAC,WAAW,CAAC,EAAE;QAC3C,eAAe,EAAE,CAAC,CAAC,CAAC;QACpB,gBAAgB,EAAE,EAAE;QACpB,cAAc,EAAE,qBAAqB;QACrC,iBAAiB,EAAE,CAAC;QACpB,cAAc,EAAE,EAAE;KACnB,CAAC;CACH;;;;;;;;;AAKD,SAAA,eAAA,CACE,qBAA0B,EAC1B,kBAA+B,EAC/B,cAAoB,EACpB,OAA0C,EAJ5C;IAIE,IAAF,OAAA,KAAA,KAAA,CAAA,EAAE,EAAA,OAAF,GAAA,EAA4C,CAA5C,EAAA;;;;IAKE,OAAO,UACL,OAAgC,EADpC,EAE4C,OAAA,UAAC,WAAW,EAAE,YAAY,EAFtE;QAGQ,IAAA,EAAR,GAAA,WAAA,IAAA,kBAUuC,EATjC,YADN,GAAA,EAAA,CAAA,YACkB,EACZ,WAFN,GAAA,EAAA,CAAA,WAEiB,EACX,YAHN,GAAA,EAAA,CAAA,YAGkB,EACZ,eAJN,GAAA,EAAA,CAAA,eAIqB,EACf,gBALN,GAAA,EAAA,CAAA,gBAKsB,EAChB,cANN,GAAA,EAAA,CAAA,cAMoB,EACd,iBAPN,GAAA,EAAA,CAAA,iBAOuB,EACjB,cARN,GAAA,EAAA,CAAA,cAQoB,CAEoB;QAEpC,IAAI,CAAC,WAAW,EAAE;;YAEhB,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;SAC1C;;;;;QAED,SAAJ,mBAAA,CAAiC,CAAS,EAA1C;;YAEM,qBAAI,MAAM,GAAG,CAAC,CAAC;YACf,qBAAI,WAAW,GAAG,eAAe,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC;YAEvD,KAAK,qBAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC3C,IAAI,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE;;oBAE/B,MAAM,GAAG,CAAC,CAAC;oBACX,WAAW,GAAG,eAAe,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC;oBACnD,MAAM;iBACP;qBAAM;oBACL,OAAO,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;iBACpC;aACF;YAED,gBAAgB,GAAG,gBAAgB,CAAC,MAAM,CACxC,UAAA,EAAE,EADV,EACc,OAAA,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAD5C,EAC4C,CACrC,CAAC;YACF,eAAe,GAArB,CAAyB,CAAC,CAA1B,CAAA,MAAA,CAA+B,eAAe,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAC5D,cAAc,GAAG,cAAc,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC;YAC9C,cAAc,GAAG,cAAc,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YAC9C,iBAAiB;gBACf,iBAAiB,GAAG,MAAM,GAAG,iBAAiB,GAAG,MAAM,GAAG,CAAC,CAAC;SAC/D;;;;QAKD,qBAAI,wBAAwB,GAAG,CAAC,CAAC;QAEjC,QAAQ,YAAY,CAAC,IAAI;YACvB,KAAKS,KAAa,EAAE;;gBAElB,WAAW,GAAG,EAAE,CAAC,EAAE,UAAU,CAAC,WAAW,CAAC,EAAE,CAAC;gBAC7C,YAAY,GAAG,CAAC,CAAC;gBACjB,eAAe,GAAG,CAAC,CAAC,CAAC,CAAC;gBACtB,gBAAgB,GAAG,EAAE,CAAC;gBACtB,cAAc,GAAG,qBAAqB,CAAC;gBACvC,iBAAiB,GAAG,CAAC,CAAC;gBACtB,cAAc,GAAG,EAAE,CAAC;gBACpB,MAAM;aACP;YACD,KAAKD,MAAc,EAAE;;;gBAGnB,WAAW,GAAG,EAAE,CAAC,EAAE,UAAU,CAAC,WAAW,CAAC,EAAE,CAAC;gBAC7C,YAAY,GAAG,CAAC,CAAC;gBACjB,eAAe,GAAG,CAAC,CAAC,CAAC,CAAC;gBACtB,gBAAgB,GAAG,EAAE,CAAC;gBACtB,cAAc,GAAG,cAAc,CAAC,iBAAiB,CAAC,CAAC,KAAK,CAAC;gBACzD,iBAAiB,GAAG,CAAC,CAAC;gBACtB,cAAc,GAAG,EAAE,CAAC;gBACpB,MAAM;aACP;YACD,KAAKD,QAAgB,EAAE;;;gBAGrB,WAAW,GAAG,EAAE,CAAC,EAAE,UAAU,CAAC,WAAW,CAAC,EAAE,CAAC;gBAC7C,YAAY,GAAG,CAAC,CAAC;gBACjB,eAAe,GAAG,CAAC,CAAC,CAAC,CAAC;gBACtB,gBAAgB,GAAG,EAAE,CAAC;gBACtB,iBAAiB,GAAG,CAAC,CAAC;gBACtB,cAAc,GAAG,EAAE,CAAC;gBACpB,MAAM;aACP;YACD,KAAKD,aAAqB,EAAE;;;gBAGlB,IAAA,UAAhB,GAAA,YAAA,CAAA,EAA4B,CAAkB;gBACtC,qBAAM,KAAK,GAAG,gBAAgB,CAAC,OAAO,CAAC,UAAQ,CAAC,CAAC;gBACjD,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;oBAChB,gBAAgB,GAA1B,CAA8B,UAAQ,CAAtC,CAAA,MAAA,CAA2C,gBAAgB,CAAC,CAAC;iBACpD;qBAAM;oBACL,gBAAgB,GAAG,gBAAgB,CAAC,MAAM,CAAC,UAAA,EAAE,EAAvD,EAA2D,OAAA,EAAE,KAAK,UAAQ,CAA1E,EAA0E,CAAC,CAAC;iBACnE;;gBAED,wBAAwB,GAAG,eAAe,CAAC,OAAO,CAAC,UAAQ,CAAC,CAAC;gBAC7D,MAAM;aACP;YACD,KAAKD,kBAA0B,EAAE;;;gBAGvB,IAAA,KAAhB,GAAA,YAAA,CAAA,KAAqB,EAAE,GAAvB,GAAA,YAAA,CAAA,GAA0B,EAAE,MAA5B,GAAA,YAAA,CAAA,MAAkC,CAAkB;gBAC5C,qBAAM,SAAS,GAAG,EAAE,CAAC;gBACrB,KAAK,qBAAI,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE;oBAAE,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;gBACpD,IAAI,MAAM,EAAE;oBACV,gBAAgB,GAAG,UAAU,CAAC,gBAAgB,EAAE,SAAS,CAAC,CAAC;iBAC5D;qBAAM;oBACL,gBAAgB,GAAO,gBAAgB,CAAjD,MAAA,CAAsD,SAAS,CAAC,CAAC;iBACxD;;gBAGD,wBAAwB,GAAG,eAAe,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;gBAC1D,MAAM;aACP;YACD,KAAKD,aAAqB,EAAE;;;gBAG1B,iBAAiB,GAAG,YAAY,CAAC,KAAK,CAAC;;gBAEvC,wBAAwB,GAAG,QAAQ,CAAC;gBACpC,MAAM;aACP;YACD,KAAKD,KAAa,EAAE;;gBAElB,eAAe,GAAG,UAAU,CAAC,eAAe,EAAE,gBAAgB,CAAC,CAAC;gBAChE,gBAAgB,GAAG,EAAE,CAAC;gBACtB,iBAAiB,GAAG,IAAI,CAAC,GAAG,CAC1B,iBAAiB,EACjB,eAAe,CAAC,MAAM,GAAG,CAAC,CAC3B,CAAC;gBACF,MAAM;aACP;YACD,KAAKX,cAAsB,EAAE;;gBAE3B,IAAI,OAAO,CAAC,MAAM,IAAI,eAAe,CAAC,MAAM,KAAK,OAAO,CAAC,MAAM,EAAE;oBAC/D,mBAAmB,CAAC,CAAC,CAAC,CAAC;iBACxB;gBAED,IAAI,iBAAiB,KAAK,eAAe,CAAC,MAAM,GAAG,CAAC,EAAE;oBACpD,iBAAiB,EAAE,CAAC;iBACrB;gBACD,qBAAM,QAAQ,GAAG,YAAY,EAAE,CAAC;;;gBAGhC,WAAW,CAAC,QAAQ,CAAC,GAAG,YAAY,CAAC;gBACrC,eAAe,GAAO,eAAe,CAA7C,MAAA,CAAA,CAA+C,QAAQ,CAAvD,CAAwD,CAAC;;gBAEjD,wBAAwB,GAAG,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC;gBACtD,MAAM;aACP;YACD,KAAKU,YAAoB,EAAE;;gBAEzB,CAAC,EAAT,GAAA,YAAA,CAAA,eASwC,EAR9B,YADV,GAAA,EAAA,CAAA,YACsB,EACZ,WAFV,GAAA,EAAA,CAAA,WAEqB,EACX,YAHV,GAAA,EAAA,CAAA,YAGsB,EACZ,eAJV,GAAA,EAAA,CAAA,eAIyB,EACf,gBALV,GAAA,EAAA,CAAA,gBAK0B,EAChB,cANV,GAAA,EAAA,CAAA,cAMwB,EACd,iBAPV,GAAA,EAAA,CAAA,iBAO2B,EACjB,cARV,GAAA,EAAA,CAAA,cAQwB,EACkB;gBAClC,MAAM;aACP;YACD,KAAKD,YAAM,CAAC;YACZ,KAAKD,UAAI,EAAE;;gBAET,wBAAwB,GAAG,CAAC,CAAC;gBAE7B,IAAI,OAAO,CAAC,MAAM,IAAI,eAAe,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,EAAE;;oBAE7D,cAAc,GAAG,eAAe,CAC9B,cAAc,EACd,wBAAwB,EACxB,OAAO,EACP,cAAc,EACd,WAAW,EACX,eAAe,EACf,gBAAgB,CACjB,CAAC;oBAEF,mBAAmB,CAAC,eAAe,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;;oBAG7D,wBAAwB,GAAG,QAAQ,CAAC;iBACrC;gBAED,MAAM;aACP;YACD,SAAS;;;gBAGP,wBAAwB,GAAG,QAAQ,CAAC;gBACpC,MAAM;aACP;SACF;QAED,cAAc,GAAG,eAAe,CAC9B,cAAc,EACd,wBAAwB,EACxB,OAAO,EACP,cAAc,EACd,WAAW,EACX,eAAe,EACf,gBAAgB,CACjB,CAAC;QACF,YAAY,GAAG,cAAc,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC;QAE1D,OAAO;YACL,YAAY,EAAlB,YAAkB;YACZ,WAAW,EAAjB,WAAiB;YACX,YAAY,EAAlB,YAAkB;YACZ,eAAe,EAArB,eAAqB;YACf,gBAAgB,EAAtB,gBAAsB;YAChB,cAAc,EAApB,cAAoB;YACd,iBAAiB,EAAvB,iBAAuB;YACjB,cAAc,EAApB,cAAoB;SACf,CAAC;;KACH,CAAH,EAAG,CAAC;CACH;;;;;ADrWD,IAAA,kBAAA,IAAA,UAAA,MAAA,EAAA;IA4BwC,SAAxC,CAAA,kBAAA,EAAA,MAAA,CAAA,CAAsD;IA5BtD,SAAA,kBAAA,GAAA;;;;CAAA,CA4BwCnB,oBAAc,CA5BtD,CAAA,CAAA;;IA2BA,EAAA,IAAA,EAACC,eAAU,EAAX;;;;AAIA,IAAA,aAAA,IAAA,YAAA;;;;;;;;;;IAME,SAAF,aAAA,CACI,UAA8B,EAC9B,QAAwB,EACxB,SAA4B,EAC5B,SAA4B,EAC5B,cAAqC,EACd,YAN3B,EAOmC,MAPnC,EAAA;QASI,qBAAM,kBAAkB,GAAG,gBAAgB,CAAC,YAAY,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC;QAC1E,qBAAM,WAAW,GAAG,eAAe,CACjC,YAAY,EACZ,kBAAkB,EAClB,MAAM,CAAC,OAAO,EACd,MAAM,CACP,CAAC;QAEF,qBAAM,aAAa,GAAG,cAAc,CAAC,QAAQ,CAAC,YAAY,EAAE,EAAE;YAC5D,CAACiB,SAAI,EAAE,CAAC,CAAC;YACT,CAACD,WAAK,EAAE,SAAS,CAAC,QAAQ,CAAC;YAC3B,CAACP,OAAG,EAAE,UAAU,CAAC;YACjB,CAACO,WAAK,EAAE,UAAU,EAAE,SAAS,CAAC,cAAc,CAAC;YAC7C,CAACF,mBAAS,EAAEC,WAAK,CAAC;SACnB,CAAC,CAAC;QAEH,qBAAM,cAAc,GAAGN,OAAG,CAAC,IAAI,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;QAExD,qBAAM,kBAAkB,GAAG,IAAII,2BAAa,CAAc,CAAC,CAAC,CAAC;QAC7D,qBAAM,uBAAuB,GAAG,cAAc,CAAC,aAAa,EAAE;YAC5D,CAACD,6BAAc,EAAE,cAAc,CAAC;YAChC;gBACED,SAAI;gBACJ,UAAC,EAA2B,EAAE,EAAsB,EAA5D;oBAAA,IAAW,WAAX,GAAA,EAAA,CAAA,KAA6B,CAA7B;oBAAA,IAAuC,MAAvC,GAAA,EAAA,CAAA,CAAA,CAA6C,EAAE,OAA/C,GAAA,EAAA,CAAA,CAAA,CAAsD,CAAtD;oBACU,qBAAM,KAAK,GAAG,OAAO,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;oBAE3C,SAAS,CAAC,MAAM,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;oBAEhC,OAAO,EAAE,KAAK,EAAxB,KAAwB,EAAE,MAAM,EAAhC,MAAgC,EAAE,CAAC;iBAC1B;gBACD,EAAE,KAAK,EAAE,kBAAkB,EAAE,MAAM,EAAE,IAAI,EAAE;aAC5C;SACF,CAAC,CAAC,SAAS,CAAC,UAAC,EAAiB,EAAnC;YAAA,IAAoB,KAApB,GAAA,EAAA,CAAA,KAAyB,EAAE,MAA3B,GAAA,EAAA,CAAA,MAAiC,CAAjC;YACM,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAE/B,IAAI,MAAM,CAAC,IAAI,KAAKD,cAAsB,EAAE;gBAC1C,qBAAM,cAAc,GAAG,EAAC,MAA+B,GAAE,MAAM,CAAC;gBAEhE,cAAc,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;aACrC;SACF,CAAC,CAAC;QAEH,qBAAM,YAAY,IAAG,kBAAkB,CAAC,YAAY,EAEnD,CAAA,CAAC;QACF,qBAAM,MAAM,GAAGD,OAAG,CAAC,IAAI,CAAC,YAAY,EAAE,WAAW,CAAC,CAAC;QAEnD,IAAI,CAAC,iBAAiB,GAAG,uBAAuB,CAAC;QACjD,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,WAAW,GAAG,YAAY,CAAC;QAChC,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;KACrB;;;;;IAED,aAAF,CAAA,SAAA,CAAA,QAAU,GAAR,UAAS,MAAc,EAAzB;QACI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAC9B,CAAH;;;;;IAEE,aAAF,CAAA,SAAA,CAAA,IAAM,GAAJ,UAAK,MAAW,EAAlB;QACI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAC9B,CAAH;;;;;IAEE,aAAF,CAAA,SAAA,CAAA,KAAO,GAAL,UAAM,KAAU,EAAlB,GAAsB,CAAtB;;;;IAEE,aAAF,CAAA,SAAA,CAAA,QAAU,GAAR,YAAF,GAAe,CAAf;;;;;IAEE,aAAF,CAAA,SAAA,CAAA,aAAe,GAAb,UAAc,MAAW,EAA3B;QACI,IAAI,CAAC,QAAQ,CAAC,IAAID,aAAqB,CAAC,MAAM,CAAC,CAAC,CAAC;KAClD,CAAH;;;;IAEE,aAAF,CAAA,SAAA,CAAA,KAAO,GAAL,YAAF;QACI,IAAI,CAAC,QAAQ,CAAC,IAAID,KAAa,EAAE,CAAC,CAAC;KACpC,CAAH;;;;IAEE,aAAF,CAAA,SAAA,CAAA,QAAU,GAAR,YAAF;QACI,IAAI,CAAC,QAAQ,CAAC,IAAID,QAAgB,EAAE,CAAC,CAAC;KACvC,CAAH;;;;IAEE,aAAF,CAAA,SAAA,CAAA,MAAQ,GAAN,YAAF;QACI,IAAI,CAAC,QAAQ,CAAC,IAAID,MAAc,EAAE,CAAC,CAAC;KACrC,CAAH;;;;IAEE,aAAF,CAAA,SAAA,CAAA,KAAO,GAAL,YAAF;QACI,IAAI,CAAC,QAAQ,CAAC,IAAID,KAAa,EAAE,CAAC,CAAC;KACpC,CAAH;;;;;IAEE,aAAF,CAAA,SAAA,CAAA,YAAc,GAAZ,UAAa,EAAU,EAAzB;QACI,IAAI,CAAC,QAAQ,CAAC,IAAID,YAAoB,CAAC,EAAE,CAAC,CAAC,CAAC;KAC7C,CAAH;;;;;IAEE,aAAF,CAAA,SAAA,CAAA,WAAa,GAAX,UAAY,KAAa,EAA3B;QACI,IAAI,CAAC,QAAQ,CAAC,IAAID,WAAmB,CAAC,KAAK,CAAC,CAAC,CAAC;KAC/C,CAAH;;;;;IAEE,aAAF,CAAA,SAAA,CAAA,WAAa,GAAX,UAAY,eAAoB,EAAlC;QACI,IAAI,CAAC,QAAQ,CAAC,IAAID,WAAmB,CAAC,eAAe,CAAC,CAAC,CAAC;KACzD,CAAH;;CA9GA,EAAA,CAAA,CAAA;;IADA,EAAA,IAAA,EAACD,eAAU,EAAX;;;;IAFA,EAAA,IAAA,EAAa,kBAAkB,GAA/B;IAtBA,EAAA,IAAA,EAAED,oBAAc,GAAhB;IADA,EAAA,IAAA,EAAED,uBAAiB,GAAnB;IAgBA,EAAA,IAAA,EAAS,iBAAiB,GAA1B;IAdA,EAAA,IAAA,EAAED,2BAAqB,GAAvB;IAoCA,EAAA,IAAA,EAAA,SAAA,EAAA,UAAA,EAAA,CAAA,EAAA,IAAA,EAAKF,WAAM,EAAX,IAAA,EAAA,CAAYC,mBAAa,EAAzB,EAAA,EAAA,EAAA;IAlBA,EAAA,IAAA,EAAS,mBAAmB,EAA5B,UAAA,EAAA,CAAA,EAAA,IAAA,EAmBKD,WAAM,EAnBX,IAAA,EAAA,CAmBY,qBAAqB,EAnBjC,EAAA,EAAA,EAAA;;;;;;ADzBA,IAkCa,+BAA+B,GAAG,IAAID,mBAAc,CAC/D,0CAA0C,CAC3C,CAAC;;;;;;AAEF,SAAA,iCAAA,CACE,SAAwC,EACxC,MAA2B,EAF7B;IAIE,OAAO,OAAO,CAAC,SAAS,CAAC,IAAI,MAAM,CAAC,OAAO,KAAK,SAAS,CAAC;CAC3D;;;;AAED,SAAA,4BAAA,GAAA;IACE,qBAAM,YAAY,GAAG,8BAA8B,CAAC;IAEpD,IACE,OAAO,MAAM,KAAK,QAAQ;QAC1B,OAAO,EAAC,MAAa,GAAE,YAAY,CAAC,KAAK,WAC3C,EAAE;QACA,OAAO,EAAC,MAAa,GAAE,YAAY,CAAC,CAAC;KACtC;SAAM;QACL,OAAO,IAAI,CAAC;KACb;CACF;;;;;AAED,SAAA,qBAAA,CAAsC,QAAuB,EAA7D;IACE,OAAO,QAAQ,CAAC,KAAK,CAAC;CACvB;;;;AAED,SAAA,SAAA,GAAA;IACE,OAAO,IAAI,CAAC;CACb;;;;AAED,SAAA,iBAAA,GAAA;IACE,OAAO,IAAI,CAAC;CACb;;;;AAED,SAAA,gBAAA,GAAA;IACE,OAAO,IAAI,CAAC;CACb;AAED,IAAa,YAAY,GAAG,qBAAqB,CAAC;;;;;AAElD,SAAA,YAAA,CACE,QAA8B,EADhC;IAGE,qBAAM,eAAe,GAAwB;QAC3C,MAAM,EAAE,KAAK;QACb,OAAO,EAAE,SAAS;QAClB,eAAe,EAAE,iBAAiB;QAClC,cAAc,EAAE,gBAAgB;QAChC,IAAI,EAAE,YAAY;QAClB,SAAS,EAAE,KAAK;KACjB,CAAC;IAEF,qBAAI,OAAO,GAAG,OAAO,QAAQ,KAAK,UAAU,GAAG,QAAQ,EAAE,GAAG,QAAQ,CAAC;IACrE,qBAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,eAAe,EAAE,OAAO,CAAC,CAAC;IAE3D,IAAI,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;QACtC,MAAM,IAAI,KAAK,CACb,+CADN,GACsD,MAAM,CAAC,MAAQ,CAChE,CAAC;KACH;IAED,OAAO,MAAM,CAAC;CACf;AAGD,IAAA,mBAAA,IAAA,YAAA;IAAA,SAAA,mBAAA,GAAA;;;;;;IACS,mBAAT,CAAA,UAAmB,GAAjB,UAAkB,OAAkC,EAAtD;QAAoB,IAApB,OAAA,KAAA,KAAA,CAAA,EAAoB,EAAA,OAApB,GAAA,EAAsD,CAAtD,EAAA;QACI,OAAO;YACL,QAAQ,EAAE,mBAAmB;YAC7B,SAAS,EAAE;gBACT,iBAAiB;gBACjB,kBAAkB;gBAClB,aAAa;gBACb;oBACE,OAAO,EAAE,eAAe;oBACxB,QAAQ,EAAE,OAAO;iBAClB;gBACD;oBACE,OAAO,EAAE,+BAA+B;oBACxC,IAAI,EAAE,CAAC,wBAAwB,EAAE,qBAAqB,CAAC;oBACvD,UAAU,EAAE,iCAAiC;iBAC9C;gBACD;oBACE,OAAO,EAAE,wBAAwB;oBACjC,UAAU,EAAE,4BAA4B;iBACzC;gBACD;oBACE,OAAO,EAAE,qBAAqB;oBAC9B,IAAI,EAAE,CAAC,eAAe,CAAC;oBACvB,UAAU,EAAE,YAAY;iBACzB;gBACD;oBACE,OAAO,EAAED,qBAAe;oBACxB,IAAI,EAAE,CAAC,aAAa,CAAC;oBACrB,UAAU,EAAE,qBAAqB;iBAClC;gBACD;oBACE,OAAO,EAAED,8BAAwB;oBACjC,WAAW,EAAE,kBAAkB;iBAChC;aACF;SACF,CAAC;KACH,CAAH;;CArCA,EAAA,CAAA,CAAA;;IADA,EAAA,IAAA,EAACD,aAAQ,EAAT,IAAA,EAAA,CAAU,EAAE,EAAZ,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}